<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="dbGaPCheckup">
<title>dbGaPCheckup Vignette • dbGaPCheckup</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="dbGaPCheckup Vignette">
<meta property="og:description" content="dbGaPCheckup">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">dbGaPCheckup</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/dbGaPCheckup.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/dbGaPCheckup_vignette.html">dbGaPCheckup Vignette</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/lwheinsberg/dbGaPCheckup/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">


<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>dbGaPCheckup Vignette</h1>
                        <h4 data-toc-skip class="author"></h4>
<p>Lacey W.
Heinsberg and Daniel E. Weeks</p>
            
            <h4 data-toc-skip class="date">February 13, 2023</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/lwheinsberg/dbGaPCheckup/blob/HEAD/vignettes/dbGaPCheckup_vignette.Rmd" class="external-link"><code>vignettes/dbGaPCheckup_vignette.Rmd</code></a></small>
      <div class="d-none name"><code>dbGaPCheckup_vignette.Rmd</code></div>
    </div>

    
    
<div class="section level2" number="1">
<h2 id="copyright-information">
<span class="header-section-number">1</span> Copyright
information<a class="anchor" aria-label="anchor" href="#copyright-information"></a>
</h2>
<p>Copyright 2022, University of Pittsburgh. All Rights Reserved.
License: <a href="https://www.gnu.org/licenses/old-licenses/gpl-2.0.en.html" class="external-link">GPL-2</a></p>
</div>
<div class="section level2" number="2">
<h2 id="overview">
<span class="header-section-number">2</span> Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>This document describes our R package, <code>dbGaPCheckup</code>,
which implements a series of check, awareness, utility, and reporting
functions to help you ensure your scientific data set meets <a href="https://www.ncbi.nlm.nih.gov/gap/docs/submissionguide/" class="external-link">formatting
requirements</a> for submission to the National Library of Medicine’s
database of Genotypes and Phenotypes (<a href="https://www.ncbi.nlm.nih.gov/gap/" class="external-link">dbGaP</a>).</p>
<p>This vignette was designed to give you a broad overview of the
utility of this R package. A complete table of functions and
descriptions is shown below. See the Quick Start
(<code>dbGaPCheckup</code>) vignette for a brief introduction to the
package.</p>
<table class="table">
<caption>List of function names and types.</caption>
<colgroup>
<col width="6%">
<col width="5%">
<col width="87%">
</colgroup>
<thead><tr class="header">
<th align="left">Function_Name</th>
<th align="left">Function_Type</th>
<th align="left">Function_Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">field_check</td>
<td align="left">check</td>
<td align="left">Checks for dbGaP required fields: variable name
(VARNAME), variable description (VARDESC), units (UNITS), and variable
value and meaning (VALUES).</td>
</tr>
<tr class="even">
<td align="left">pkg_field_check</td>
<td align="left">check</td>
<td align="left">Checks for package-level required fields: variable type
(TYPE), minimum value (MIN), and maximum value (MAX).</td>
</tr>
<tr class="odd">
<td align="left">dimension_check</td>
<td align="left">check</td>
<td align="left">Checks that the number of variables match between the
data set and data dictionary.</td>
</tr>
<tr class="even">
<td align="left">name_check</td>
<td align="left">check</td>
<td align="left">Checks that variable names match between the data set
and data dictionary.</td>
</tr>
<tr class="odd">
<td align="left">id_check</td>
<td align="left">check</td>
<td align="left">Checks that the first column of the data set is the
primary ID for each participant labeled as SUBJECT_ID, that values
contain no illegal characters or padded zeros, and that each participant
has an ID.</td>
</tr>
<tr class="even">
<td align="left">row_check</td>
<td align="left">check</td>
<td align="left">Checks for empty or duplicate rows in the data set and
data dictionary.</td>
</tr>
<tr class="odd">
<td align="left">NA_check</td>
<td align="left">check</td>
<td align="left">Checks for NA values in the data set and, if NA values
are present, also checks for an encoded NA value=meaning
description.</td>
</tr>
<tr class="even">
<td align="left">type_check</td>
<td align="left">check</td>
<td align="left">If a TYPE field exists, this function checks for any
TYPE entries that aren’t allowable per dbGaP instructions.</td>
</tr>
<tr class="odd">
<td align="left">values_check</td>
<td align="left">check</td>
<td align="left">Checks for potential errors in the VALUES columns by
ensuring (1) required format of <code>VALUE=MEANING</code> (e.g., 0=No
or 1=Yes); (2) no leading/trailing spaces near the equals sign (e.g.,
0=No vs. 0 = No); (3) all variables of TYPE encoded have VALUES entries;
and (4) all variables with VALUES entries are listed as TYPE
encoded.</td>
</tr>
<tr class="even">
<td align="left">integer_check</td>
<td align="left">check</td>
<td align="left">Checks for variables that appear to be incorrectly
listed as TYPE integer.</td>
</tr>
<tr class="odd">
<td align="left">decimal_check</td>
<td align="left">check</td>
<td align="left">Checks for variables that appear to be incorrectly
listed as TYPE decimal.</td>
</tr>
<tr class="even">
<td align="left">misc_format_check</td>
<td align="left">check</td>
<td align="left">Checks miscellaneous dbGaP formatting requirements to
ensure (1) no empty variable names; (2) no duplicate variable names; (3)
variable names do not contain “dbgap”; (4) there are no duplicate column
names in the dictionary; and (5) column names falling after
<code>VALUES</code> column are unnamed.</td>
</tr>
<tr class="odd">
<td align="left">description_check</td>
<td align="left">check</td>
<td align="left">Checks for unique and non-missing descriptions
(VARDESC) for every variable in the data dictionary.</td>
</tr>
<tr class="even">
<td align="left">minmax_check</td>
<td align="left">check</td>
<td align="left">Checks for variables that have values exceeding the
listed MIN or MAX.</td>
</tr>
<tr class="odd">
<td align="left">missing_value_check</td>
<td align="left">check</td>
<td align="left">Checks for variables that have non-encoded missing
value codes.</td>
</tr>
<tr class="even">
<td align="left">complete_check</td>
<td align="left">bulk check</td>
<td align="left">Runs the entire workflow (field_check, pkg_field_check,
dimension_check, name_check, id_check, row_check, NA_check, type_check,
values_check, integer_check, decimal_check, misc_format_check,
description_check, minmax_check, and missing_value_check).</td>
</tr>
<tr class="odd">
<td align="left">add_missing_fields</td>
<td align="left">utility</td>
<td align="left">Adds additional fields required by this package
including variable type (‘TYPE’), minimum value (‘MIN’), and maximum
value (‘MAX’).</td>
</tr>
<tr class="even">
<td align="left">name_correct</td>
<td align="left">utility</td>
<td align="left">Updates the data set so variable names match those
listed in the data dictionary.</td>
</tr>
<tr class="odd">
<td align="left">reorder_dictionary</td>
<td align="left">utility</td>
<td align="left">Reorders the data dictionary to match the data
set.</td>
</tr>
<tr class="even">
<td align="left">reorder_data</td>
<td align="left">utility</td>
<td align="left">Reorders the data set to match the data
dictionary.</td>
</tr>
<tr class="odd">
<td align="left">id_first_data</td>
<td align="left">utility</td>
<td align="left">Reorders the data set so that SUBJECT_ID comes
first.</td>
</tr>
<tr class="even">
<td align="left">id_first_dict</td>
<td align="left">utility</td>
<td align="left">Reorders the data dictionary so that SUBJECT_ID comes
first.</td>
</tr>
<tr class="odd">
<td align="left">label_data</td>
<td align="left">utility, awareness</td>
<td align="left">Adds non-missing information from the data dictionary
as attributes to the data.</td>
</tr>
<tr class="even">
<td align="left">value_meaning_table</td>
<td align="left">utility, awareness</td>
<td align="left">Generates a value-meaning table by parsing the VALUES
fields.</td>
</tr>
<tr class="odd">
<td align="left">missingness_summary</td>
<td align="left">awareness</td>
<td align="left">Summarizes the amount of missingness in the data
set.</td>
</tr>
<tr class="even">
<td align="left">value_missing_table</td>
<td align="left">awareness</td>
<td align="left">Checks for consistent usage of encoded values and
missing value codes between the data dictionary and the data set.</td>
</tr>
<tr class="odd">
<td align="left">dictionary_search</td>
<td align="left">awareness</td>
<td align="left">Facilitates searches of the data dictionary.</td>
</tr>
<tr class="even">
<td align="left">check_report</td>
<td align="left">bulk check, reporting</td>
<td align="left">Generates a user-readable report of the checks run by
the complete_check function.</td>
</tr>
<tr class="odd">
<td align="left">create_report</td>
<td align="left">reporting, awareness</td>
<td align="left">Generates a textual and graphical report of the
selected variables in HTML format.</td>
</tr>
<tr class="even">
<td align="left">create_awareness_report</td>
<td align="left">reporting, awareness</td>
<td align="left">Generates an awareness report, calling
missingness_summary and value_missing_table functions.</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2" number="3">
<h2 id="installation">
<span class="header-section-number">3</span> Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>The package is written in R language.</p>
<p>To install from <a href="https://cran.r-project.org/" class="external-link">CRAN</a>,
proceed as follows:</p>
<pre><code><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"dbGaPCheckup"</span><span class="op">)</span></span></code></pre>
<p>To install the development version from <a href="https://github.com/" class="external-link">GitHub</a>, proceed as follows:</p>
<ol style="list-style-type: decimal">
<li>Install and load the <code>devtools</code> package by issuing these
commands:</li>
</ol>
<pre><code><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://devtools.r-lib.org/" class="external-link">devtools</a></span><span class="op">)</span></span></code></pre>
<ol start="2" style="list-style-type: decimal">
<li>Install and load the <code>dbGaPCheckup</code> by issuing these
commands:</li>
</ol>
<pre><code><span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"lwheinsberg/dbGaPCheckup/pkg"</span><span class="op">)</span></span></code></pre>
<p>If you wish to have this vignette installed and accessible within
your R help pages, use this command instead:</p>
<p><code>install_github("lwheinsberg/dbGaPCheckup/pkg", build_opts = c("--no-resave-data", "--no-manual"), build_vignettes = TRUE)</code></p>
<p>After the <code>dbGaPCheckup</code> package has been installed, you
can view load the package using this command:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://lwheinsberg.github.io/dbGaPCheckup/">dbGaPCheckup</a></span><span class="op">)</span></span></code></pre></div>
<p>and view this vignette using:</p>
<p><code>browseVignettes("dbGaPCheckup")</code></p>
</div>
<div class="section level2" number="4">
<h2 id="data-format-file-types-and-file-names">
<span class="header-section-number">4</span> Data format, file
types, and file names<a class="anchor" aria-label="anchor" href="#data-format-file-types-and-file-names"></a>
</h2>
<p>dbGaP has a host of <a href="https://www.ncbi.nlm.nih.gov/gap/docs/submissionguide/" class="external-link">formatting
requirements</a> for data set submission.</p>
<p>This package focuses on two required files: the Subject Phenotype
data set (DS) and the corresponding Subject Phenotype data dictionary
(DD). Brief instructions on setting up the files have been included
below.</p>
<div class="section level3" number="4.1">
<h3 id="files">
<span class="header-section-number">4.1</span> Files<a class="anchor" aria-label="anchor" href="#files"></a>
</h3>
<p>Checks that are NOT currently embedded into this package that we want
to draw special attention to include:</p>
<ol style="list-style-type: decimal">
<li><p>You may ONLY submit tab-delimited .txt and .xlsx files.<br>
–&gt; Tab-delimited txt files are preferable for the data set.<br>
–&gt; Excel (.xlsx) format is preferable for the data
dictionary.</p></li>
<li><p>File names should NOT contain special characters, spaces,
hyphens, brackets, periods, or forward (/) or backward slashes ().<br>
–&gt; For example, ‘data.set.txt’, ‘data-set.txt’, ‘data set.txt’ are
all illegal names, but ‘data_set.txt’ would be OK.</p></li>
<li><p>Excel files are only allowed to have one sheet (i.e., no multiple
tabs/sheets are allowed).</p></li>
</ol>
</div>
<div class="section level3" number="4.2">
<h3 id="subject-phenotype-data-set-ds">
<span class="header-section-number">4.2</span> Subject Phenotype
Data Set (DS)<a class="anchor" aria-label="anchor" href="#subject-phenotype-data-set-ds"></a>
</h3>
<p>In brief, the Subject Phenotype data set consists of the study data
for participants. In the data set, each row represents a participant,
and each column represents a study phenotype variable. The first column
in the data set needs to be labeled <code>SUBJECT_ID</code> and contains
the unique participant identifier as an integer or string value.
Integers should not have zero padding or spaces. Specifically, only the
following characters can be included in the ID: English letters, Arabic
numerals, period (.), hyphen (-), underscore (_), at symbol (@), and the
pound sign (#). Columns falling after <code>SUBJECT_ID</code> will be
unique to a given study, but include participant factors such as age,
sex, etc. Formatting for an example data set is shown below.</p>
<table class="table">
<caption>First six lines of an example dbGaP data set.</caption>
<colgroup>
<col width="3%">
<col width="3%">
<col width="1%">
<col width="1%">
<col width="2%">
<col width="3%">
<col width="2%">
<col width="3%">
<col width="2%">
<col width="3%">
<col width="3%">
<col width="2%">
<col width="2%">
<col width="2%">
<col width="1%">
<col width="2%">
<col width="3%">
<col width="4%">
<col width="1%">
<col width="3%">
<col width="6%">
<col width="3%">
<col width="5%">
<col width="1%">
<col width="3%">
<col width="3%">
<col width="4%">
<col width="4%">
<col width="5%">
<col width="5%">
</colgroup>
<thead><tr class="header">
<th align="right">SUBJECT_ID</th>
<th align="right">SAMPLE_ID</th>
<th align="right">AGE</th>
<th align="right">SEX</th>
<th align="right">PREGNANT</th>
<th align="right">HEIGHT</th>
<th align="right">WEIGHT</th>
<th align="right">BMI</th>
<th align="right">OBESITY</th>
<th align="right">ABD_CIRC</th>
<th align="right">HIP_CIRC</th>
<th align="right">ABD_SKF</th>
<th align="right">SUP_SKF</th>
<th align="right">RESIST</th>
<th align="right">REACT</th>
<th align="right">CUFFSIZE</th>
<th align="right">BP_SYSTOLIC</th>
<th align="right">BP_DIASTOLIC</th>
<th align="right">HTN</th>
<th align="right">SMOKING_HX</th>
<th align="right">LENGTH_SMOKING_YEARS</th>
<th align="right">HEART_RATE</th>
<th align="right">PHYSICAL_ACTIVITY</th>
<th align="right">HX_DM</th>
<th align="right">HX_STROKE</th>
<th align="right">HX_ANXIETY</th>
<th align="right">HX_DEPRESSION</th>
<th align="right">SOCIAL_SUPPORT</th>
<th align="right">PERCEIVED_CONFLICT</th>
<th align="right">PERCEIVED_HEALTH</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">1001</td>
<td align="right">33</td>
<td align="right">0</td>
<td align="right">-4444</td>
<td align="right">163.5000</td>
<td align="right">54.4</td>
<td align="right">20.34995</td>
<td align="right">0</td>
<td align="right">116.08677</td>
<td align="right">119.2750</td>
<td align="right">28</td>
<td align="right">23</td>
<td align="right">340</td>
<td align="right">40</td>
<td align="right">0</td>
<td align="right">120</td>
<td align="right">80</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">-4444.0</td>
<td align="right">50</td>
<td align="right">360</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">25</td>
<td align="right">10</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">1002</td>
<td align="right">45</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">159.3369</td>
<td align="right">93.2</td>
<td align="right">36.70990</td>
<td align="right">1</td>
<td align="right">110.39444</td>
<td align="right">115.8551</td>
<td align="right">24</td>
<td align="right">27</td>
<td align="right">354</td>
<td align="right">45</td>
<td align="right">3</td>
<td align="right">110</td>
<td align="right">60</td>
<td align="right">0</td>
<td align="right">-9999</td>
<td align="right">-4444.0</td>
<td align="right">54</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">5</td>
<td align="right">25</td>
<td align="right">4</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="right">1003</td>
<td align="right">34</td>
<td align="right">0</td>
<td align="right">-4444</td>
<td align="right">185.0000</td>
<td align="right">95.0</td>
<td align="right">27.75749</td>
<td align="right">0</td>
<td align="right">104.29832</td>
<td align="right">104.4375</td>
<td align="right">29</td>
<td align="right">25</td>
<td align="right">358</td>
<td align="right">55</td>
<td align="right">1</td>
<td align="right">106</td>
<td align="right">50</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">1.5</td>
<td align="right">75</td>
<td align="right">100</td>
<td align="right">-9999</td>
<td align="right">0</td>
<td align="right">-9999</td>
<td align="right">-9999</td>
<td align="right">4</td>
<td align="right">24</td>
<td align="right">8</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="right">-9999</td>
<td align="right">55</td>
<td align="right">0</td>
<td align="right">-4444</td>
<td align="right">171.5000</td>
<td align="right">85.7</td>
<td align="right">29.13752</td>
<td align="right">0</td>
<td align="right">121.77705</td>
<td align="right">118.4763</td>
<td align="right">51</td>
<td align="right">44</td>
<td align="right">389</td>
<td align="right">56</td>
<td align="right">1</td>
<td align="right">158</td>
<td align="right">95</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">-4444.0</td>
<td align="right">90</td>
<td align="right">180</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">2</td>
<td align="right">10</td>
<td align="right">5</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="right">1005</td>
<td align="right">45</td>
<td align="right">0</td>
<td align="right">-4444</td>
<td align="right">180.0000</td>
<td align="right">101.4</td>
<td align="right">31.29630</td>
<td align="right">1</td>
<td align="right">84.14132</td>
<td align="right">104.6367</td>
<td align="right">42</td>
<td align="right">25</td>
<td align="right">356</td>
<td align="right">64</td>
<td align="right">2</td>
<td align="right">169</td>
<td align="right">100</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">14.0</td>
<td align="right">85</td>
<td align="right">-9999</td>
<td align="right">1</td>
<td align="right">-9999</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">3</td>
<td align="right">5</td>
<td align="right">6</td>
</tr>
<tr class="even">
<td align="right">6</td>
<td align="right">1006</td>
<td align="right">46</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">-9999.0000</td>
<td align="right">-9999.0</td>
<td align="right">-9999.00000</td>
<td align="right">-9999</td>
<td align="right">-9999.00000</td>
<td align="right">-9999.0000</td>
<td align="right">-9999</td>
<td align="right">-9999</td>
<td align="right">-9999</td>
<td align="right">-9999</td>
<td align="right">0</td>
<td align="right">105</td>
<td align="right">40</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">25.0</td>
<td align="right">72</td>
<td align="right">180</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">4</td>
<td align="right">1</td>
<td align="right">7</td>
</tr>
</tbody>
</table>
<p>Other example data sets provided by dbGaP can be found at the NCBI <a href="https://www.ncbi.nlm.nih.gov/gap/docs/submissionguide/" class="external-link">submission
guide</a>. See “Example of a Subject Phenotypes DS File” and
“6a_SampleAttributes_DS.txt”.</p>
</div>
<div class="section level3" number="4.3">
<h3 id="subject-phenotype-data-dictionary-dd">
<span class="header-section-number">4.3</span> Subject Phenotype
Data Dictionary (DD)<a class="anchor" aria-label="anchor" href="#subject-phenotype-data-dictionary-dd"></a>
</h3>
<p>In the Subject Phenotype data dictionary, each row represents a
unique variable (that corresponds to columns in the data set), and each
column represents information about that variable (see example below).
For more detailed data dictionary formatting instructions, visit the
NCBI <a href="https://www.ncbi.nlm.nih.gov/gap/docs/submissionguide/" class="external-link">submission
guide</a> and see heading “APPENDIX for Data Dictionary (DD) File
Descriptions and Specifications”, which includes a table of required and
suggested column headers and descriptions, as well as an example file
called “6b_SampleAttributes_DD.xlsx”.</p>
<table class="table">
<caption>First six lines of an example dbGaP data dictionary.</caption>
<colgroup>
<col width="3%">
<col width="9%">
<col width="2%">
<col width="7%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="3%">
<col width="2%">
<col width="2%">
<col width="5%">
<col width="6%">
<col width="5%">
<col width="3%">
<col width="4%">
<col width="1%">
<col width="6%">
<col width="2%">
<col width="6%">
<col width="18%">
<col width="1%">
<col width="1%">
</colgroup>
<thead><tr class="header">
<th align="left">VARNAME</th>
<th align="left">VARDESC</th>
<th align="left">DOCFILE</th>
<th align="left">TYPE</th>
<th align="left">UNITS</th>
<th align="right">MIN</th>
<th align="right">MAX</th>
<th align="left">RESOLUTION</th>
<th align="left">COMMENT1</th>
<th align="left">COMMENT2</th>
<th align="left">VARIABLE_SOURCE</th>
<th align="left">SOURCE_VARIABLE_ID</th>
<th align="left">VARIABLE_MAPPING</th>
<th align="left">UNIQUEKEY</th>
<th align="left">COLLINTERVAL</th>
<th align="left">ORDER</th>
<th align="left">VALUES</th>
<th align="left">…18</th>
<th align="left">…19</th>
<th align="left">…20</th>
<th align="left">…21</th>
<th align="left">…22</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">SUBJECT_ID</td>
<td align="left">Participant ID</td>
<td align="left">NA</td>
<td align="left">integer</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">SAMPLE_ID</td>
<td align="left">Sample ID</td>
<td align="left">NA</td>
<td align="left">integer, encoded value</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">-9999=missing value</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">AGE</td>
<td align="left">Age at enrollment</td>
<td align="left">NA</td>
<td align="left">integer</td>
<td align="left">years</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">SEX</td>
<td align="left">Sex assigned at birth</td>
<td align="left">NA</td>
<td align="left">integer, encoded value</td>
<td align="left">NA</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">0=male</td>
<td align="left">1=female</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">PREGNANT</td>
<td align="left">Pregnancy status at enrollment</td>
<td align="left">NA</td>
<td align="left">integer, encoded value</td>
<td align="left">NA</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">0=no</td>
<td align="left">1=yes</td>
<td align="left">-9999=missing value</td>
<td align="left">-4444=not applicable, participant assigned male at
birth</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">HEIGHT</td>
<td align="left">Height of participant</td>
<td align="left">NA</td>
<td align="left">decimal, encoded value</td>
<td align="left">cm</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">-9999=missing value</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
</tbody>
</table>
<p>Two special data dictionary formatting notes:</p>
<ol style="list-style-type: decimal">
<li><p>The final columns of the data dictionary list all unique
values/meanings of all encoded values, one value per cell, of which will
vary based on the number of VALUE codes for a specific variable. For
example, if your data set contains a variable called <code>SEX</code> in
which 0 indicates female and 1 indicates male, these columns are
designed to communicate <code>value=meaning</code> (e.g., 0=female). The
<code>VALUES</code> header must be the last column header and should
appear ONLY in the column above the FIRST encoded value that is listed.
The remaining value column header cells should be left blank. (Note that
when we read in our example data set with blank column names after
<code>VALUES</code>, R automatically fills in the column names with the
column number (e.g., <code>...18</code>, <code>...19</code>, etc.). This
is acceptable for the package level checks, but not allowable for the
files that are submitted to dbGaP.)</p></li>
<li><p>This package requires several fields beyond those required by the
dbGaP <a href="https://www.ncbi.nlm.nih.gov/gap/docs/submissionguide/" class="external-link">formatting
requirements</a> to support additional data integrity checks.
Specifically, dbGaP requires only that the data dictionary contains the
following fields: variable name (<code>VARNAME</code>); variable
description (<code>VARDESC</code>); units (<code>UNITS</code>); and
variable value and meaning (<code>VALUE</code>). Because this package
was designed to perform both dbGaP formatting requirement checks, as
well as a series of awareness checks to help you ensure data accuracy,
this package also requires that the data dictionary contains the
following additional fields: logical minimum (<code>MIN</code>) and
logical maximum (<code>MAX</code>) values (allowed to be left blank, but
column headers are required) and the data type (e.g., integer, decimal,
encoded value, string; <code>TYPE</code>) fields. If your data
dictionary does not include these additional fields already, you can
simply use the <code>add_missing_fields</code> function to auto fill
them (see below).</p></li>
</ol>
</div>
</div>
<div class="section level2" number="5">
<h2 id="execution-with-example-runs-and-interpretation">
<span class="header-section-number">5</span> Execution with example
runs and interpretation<a class="anchor" aria-label="anchor" href="#execution-with-example-runs-and-interpretation"></a>
</h2>
<div class="section level3" number="5.1">
<h3 id="check-utility-and-awareness-functions">
<span class="header-section-number">5.1</span> Check, utility, and
awareness functions<a class="anchor" aria-label="anchor" href="#check-utility-and-awareness-functions"></a>
</h3>
<p>Note that all “check” functions included in our package return an
invisible tibble that contains (1) Time (Time stamp); (2) Name (Name of
the function); (3) Status (Passed/Failed); (4) Message (A copy of the
message the function printed out); and (5) Information (More detailed
information about the potential errors identified). This was designed to
streamline the complete workflow approach and to return a succinct
report back to you via <code>check_report</code> (see below). Note that
there are some dependencies between checks (e.g., name_check
<code>values_check</code> is dependent upon <code>field_check</code>),
so there are pre-checks embedded within many checks.</p>
<div class="section level4" number="5.1.1">
<h4 id="example-1">
<span class="header-section-number">5.1.1</span> Example 1<a class="anchor" aria-label="anchor" href="#example-1"></a>
</h4>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">ExampleD</span><span class="op">)</span></span></code></pre></div>
<p>We recommend starting with the <code>check_report</code> function,
which includes 15 embedded checks. Note that for all functions, you need
to first specify the name of the data dictionary, followed by the name
of the data set.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">e1_report</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/check_report.html">check_report</a></span><span class="op">(</span><span class="va">DD.dict.D</span>, <span class="va">DS.data.D</span>, non.NA.missing.codes<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">4444</span>, <span class="op">-</span><span class="fl">9999</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 15 × 3</span></span></span>
<span><span class="co">#&gt;    Function            Status        Message                                    </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> field_check         Passed        Passed: required fields VARNAME, VARDESC, …</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> pkg_field_check     Failed        ERROR: not all package-level required fiel…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> dimension_check     Passed        Passed: the variable count matches between…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> name_check          Passed        Passed: the variable names match between t…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> id_check            Passed        Passed: All ID variable checks passed.     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> row_check           Passed        Passed: no blank or duplicate rows detecte…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> NA_check            Not attempted ERROR: Required pre-check pkg_field_check …</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> type_check          Failed        ERROR: TYPE column not found. Consider usi…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> values_check        Not attempted ERROR: Required pre-check type_check faile…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> integer_check       Not attempted ERROR: Required pre-check pkg_field_check …</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> decimal_check       Not attempted ERROR: Required pre-check pkg_field_check …</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span> misc_format_check   Passed        Passed: no check-specific formatting issue…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span> description_check   Failed        ERROR: missing and duplicate descriptions …</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">14</span> minmax_check        Not attempted ERROR: Required pre-check pkg_field_check …</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">15</span> missing_value_check Not attempted ERROR: Required pre-check pkg_field_check …</span></span>
<span><span class="co">#&gt; --------------------</span></span>
<span><span class="co">#&gt; pkg_field_check: Failed </span></span>
<span><span class="co">#&gt; ERROR: not all package-level required fields are present in the data dictionary. Consider using the add_missing_fields function to auto fill these fields. </span></span>
<span><span class="co">#&gt; $pkg_field_check.Info</span></span>
<span><span class="co">#&gt;  TYPE   MIN   MAX </span></span>
<span><span class="co">#&gt; FALSE FALSE FALSE </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; --------------------</span></span>
<span><span class="co">#&gt; type_check: Failed </span></span>
<span><span class="co">#&gt; ERROR: TYPE column not found. Consider using the add_missing_fields function to autofill TYPE. </span></span>
<span><span class="co">#&gt; $type_check.Info</span></span>
<span><span class="co">#&gt; [1] "ERROR: TYPE column not found."</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; --------------------</span></span>
<span><span class="co">#&gt; description_check: Failed </span></span>
<span><span class="co">#&gt; ERROR: missing and duplicate descriptions found in data dictionary. </span></span>
<span><span class="co">#&gt; $description_check.Info</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 4 × 2</span></span></span>
<span><span class="co">#&gt;   VARNAME  VARDESC              </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> PREGNANT <span style="color: #BB0000;">NA</span>                   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> REACT    <span style="color: #BB0000;">NA</span>                   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> HEIGHT   Height of participant</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> WEIGHT   Height of participant</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; --------------------</span></span></code></pre></div>
<p>In this check, we see that several checks passed (e.g.,
<code>field_check</code>), some failed (e.g., <code>type_check</code>),
and some could not be attempted because a pre-check in the function
failed (e.g., <code>missing_value_check</code>).</p>
<p>The <code>check_report</code> output can be examined to better
understand the issues at hand. For example, let’s examine the
<code>pkg_field_check</code> results more closely. You can call more
detailed information for each check using the following commands:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">e1_report</span><span class="op">$</span><span class="va">Message</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span></span>
<span><span class="co">#&gt; [1] "ERROR: not all package-level required fields are present in the data dictionary. Consider using the add_missing_fields function to auto fill these fields."</span></span>
<span><span class="va">e1_report</span><span class="op">$</span><span class="va">Information</span><span class="op">$</span><span class="va">pkg_field_check.Info</span></span>
<span><span class="co">#&gt;  TYPE   MIN   MAX </span></span>
<span><span class="co">#&gt; FALSE FALSE FALSE</span></span></code></pre></div>
<p>Here, we see that the <code>TYPE</code>, <code>MIN</code>, and
<code>MAX</code> columns required for the complete workflow approach in
this package are missing. But never fear - we can simply use the
<code>add_missing_fields</code> function to add these in!</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">DD.dict_updated</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_missing_fields.html">add_missing_fields</a></span><span class="op">(</span><span class="va">DD.dict.D</span>, <span class="va">DS.data.D</span><span class="op">)</span></span>
<span><span class="co">#&gt; $Message</span></span>
<span><span class="co">#&gt; [1] "CORRECTED ERROR: not all package-level required fields were present in the data dictionary. The missing fields have now been added! TYPE was inferred from the data, and MIN/MAX have been added as empty fields."</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $Missing</span></span>
<span><span class="co">#&gt; [1] "TYPE" "MIN"  "MAX"</span></span></code></pre></div>
<p>Now that our error has been corrected, let’s return to
<code>check_report</code> to further investigate. Don’t forget to call
in the updated version of the data dictionary here!</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Note! Don't forget to call in the updated version of the data dictionary here! </span></span>
<span><span class="va">e1_report.v2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/check_report.html">check_report</a></span><span class="op">(</span><span class="va">DD.dict_updated</span>, <span class="va">DS.data.D</span>, </span>
<span>                non.NA.missing.codes<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">4444</span>, <span class="op">-</span><span class="fl">9999</span><span class="op">)</span><span class="op">)</span> </span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 15 × 3</span></span></span>
<span><span class="co">#&gt;    Function            Status Message                                           </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> field_check         Passed Passed: required fields VARNAME, VARDESC, UNITS, …</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> pkg_field_check     Passed Passed: package-level required fields TYPE, MIN, …</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> dimension_check     Passed Passed: the variable count matches between the da…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> name_check          Passed Passed: the variable names match between the data…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> id_check            Passed Passed: All ID variable checks passed.            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> row_check           Passed Passed: no blank or duplicate rows detected in da…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> NA_check            Passed Passed: no NA values detected in data set.        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> type_check          Passed Passed: All TYPE entries found are accepted by db…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> values_check        Passed Passed: all four VALUES checks look good.         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> integer_check       Passed Passed: all variables listed as TYPE integer appe…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> decimal_check       Passed Passed: all variables listed as TYPE decimal appe…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span> misc_format_check   Passed Passed: no check-specific formatting issues ident…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span> description_check   Failed ERROR: missing and duplicate descriptions found i…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">14</span> minmax_check        Passed Passed: when provided, all variables are within t…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">15</span> missing_value_check Failed ERROR: some variables have non-encoded missing va…</span></span>
<span><span class="co">#&gt; --------------------</span></span>
<span><span class="co">#&gt; description_check: Failed </span></span>
<span><span class="co">#&gt; ERROR: missing and duplicate descriptions found in data dictionary. </span></span>
<span><span class="co">#&gt; $description_check.Info</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 4 × 2</span></span></span>
<span><span class="co">#&gt;   VARNAME  VARDESC              </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> PREGNANT <span style="color: #BB0000;">NA</span>                   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> REACT    <span style="color: #BB0000;">NA</span>                   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> HEIGHT   Height of participant</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> WEIGHT   Height of participant</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; --------------------</span></span>
<span><span class="co">#&gt; missing_value_check: Failed </span></span>
<span><span class="co">#&gt; ERROR: some variables have non-encoded missing value codes. </span></span>
<span><span class="co">#&gt; $missing_value_check.Info</span></span>
<span><span class="co">#&gt;     VARNAME VALUE MEANING  PASS</span></span>
<span><span class="co">#&gt; 16 CUFFSIZE -9999    &lt;NA&gt; FALSE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; --------------------</span></span></code></pre></div>
<p>As you can see, now 13 out of 15 checks pass, but the workflow fails
at <code>description_check</code> and <code>missing_value_check</code>.
Specifically, in <code>description_check</code> we see that variables
<code>PREGNANT</code> and <code>REACT</code> were identified as having
missing variable descriptions (<code>VARDESC</code>), and variables
<code>HEIGHT</code> and <code>WEIGHT</code> incorrectly have identical
descriptions. In <code>missing_value_check</code>, we see that the
variable <code>CUFFSIZE</code> contains a <code>-9999</code> encoded
value that is not specified in a <code>VALUES</code> column. While we
have included several functions that support “quick fixes”
(<code>add_missing_fields</code>, <code>name_correct</code>,
<code>reorder_dictionary</code>, <code>reorder_data</code>,
<code>id_first_data</code>, and <code>id_first_dict</code>), the issues
identified here are a bit more complex and study-specific, so would need
to be corrected manually in your data dictionary before moving on. For
now, we will leave this example and move on to the next one!</p>
</div>
<div class="section level4" number="5.1.2">
<h4 id="example-2">
<span class="header-section-number">5.1.2</span> Example 2<a class="anchor" aria-label="anchor" href="#example-2"></a>
</h4>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">ExampleL</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">e2_report</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/check_report.html">check_report</a></span><span class="op">(</span><span class="va">DD.dict.L</span>, <span class="va">DS.data.L</span><span class="op">)</span> </span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 15 × 3</span></span></span>
<span><span class="co">#&gt;    Function            Status        Message                                    </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> field_check         Passed        Passed: required fields VARNAME, VARDESC, …</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> pkg_field_check     Passed        Passed: package-level required fields TYPE…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> dimension_check     Passed        Passed: the variable count matches between…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> name_check          Failed        ERROR: the variable names DO NOT match bet…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> id_check            Passed        Passed: All ID variable checks passed.     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> row_check           Passed        Passed: no blank or duplicate rows detecte…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> NA_check            Not attempted ERROR: Required pre-check name_check faile…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> type_check          Passed        Passed: All TYPE entries found are accepte…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> values_check        Failed        ERROR: at least one VALUES check flagged p…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> integer_check       Not attempted ERROR: Required pre-check name_check faile…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> decimal_check       Not attempted ERROR: Required pre-check name_check faile…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span> misc_format_check   Failed        ERROR: at least one check failed.          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span> description_check   Failed        ERROR: missing and duplicate descriptions …</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">14</span> minmax_check        Not attempted ERROR: Required pre-check name_check faile…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">15</span> missing_value_check Not attempted ERROR: Required pre-check name_check faile…</span></span>
<span><span class="co">#&gt; --------------------</span></span>
<span><span class="co">#&gt; name_check: Failed </span></span>
<span><span class="co">#&gt; ERROR: the variable names DO NOT match between the data dictionary and the data. If the intention behind the variable names is correct, consider using the name_correct function to automatically rename variables to match. </span></span>
<span><span class="co">#&gt; $name_check.Info</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 2</span></span></span>
<span><span class="co">#&gt;   Data                Dict                 </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Data: SMOKING_HX    Dict: SMOKING_HISTORY</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Data: HX_DEPRESSION Dict: DEPRESSION_HX  </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; --------------------</span></span>
<span><span class="co">#&gt; values_check: Failed </span></span>
<span><span class="co">#&gt; ERROR: at least one VALUES check flagged potentials issues. See Information for more details. </span></span>
<span><span class="co">#&gt; $values_check.Info</span></span>
<span><span class="co">#&gt;    column_name values.check            vname                   type</span></span>
<span><span class="co">#&gt; 4      VALUES3        FALSE         CUFFSIZE integer, encoded value</span></span>
<span><span class="co">#&gt; 6       VALUES        FALSE              HTN integer, encoded value</span></span>
<span><span class="co">#&gt; 7       VALUES        FALSE PERCEIVED_HEALTH integer, encoded value</span></span>
<span><span class="co">#&gt; 9      VALUES5        FALSE               28 integer, encoded value</span></span>
<span><span class="co">#&gt; 10     VALUES4        FALSE               28 integer, encoded value</span></span>
<span><span class="co">#&gt; 12     VALUES2        FALSE               16 integer, encoded value</span></span>
<span><span class="co">#&gt; 14      VALUES        FALSE           RESIST integer, encoded value</span></span>
<span><span class="co">#&gt; 15      VALUES        FALSE        SAMPLE_ID                integer</span></span>
<span><span class="co">#&gt; 16      VALUES        FALSE              SEX                integer</span></span>
<span><span class="co">#&gt;                                                   problematic_description</span></span>
<span><span class="co">#&gt; 4                                                           2 means large</span></span>
<span><span class="co">#&gt; 6                                                          0 indicates no</span></span>
<span><span class="co">#&gt; 7  Between 1 and 10 with higher values indicating better perceived health</span></span>
<span><span class="co">#&gt; 9                                                        5 = a great deal</span></span>
<span><span class="co">#&gt; 10                                                        4 = quite a bit</span></span>
<span><span class="co">#&gt; 12                                                              1 =medium</span></span>
<span><span class="co">#&gt; 14                                                                   &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 15                                                    -9999=missing value</span></span>
<span><span class="co">#&gt; 16                                                                 0=male</span></span>
<span><span class="co">#&gt;                                                                         check</span></span>
<span><span class="co">#&gt; 4                  Check 1: Is an equals sign present for all values columns?</span></span>
<span><span class="co">#&gt; 6                  Check 1: Is an equals sign present for all values columns?</span></span>
<span><span class="co">#&gt; 7                  Check 1: Is an equals sign present for all values columns?</span></span>
<span><span class="co">#&gt; 9  Check 2: Are there any leading/trailing spaces near the first equals sign?</span></span>
<span><span class="co">#&gt; 10 Check 2: Are there any leading/trailing spaces near the first equals sign?</span></span>
<span><span class="co">#&gt; 12 Check 2: Are there any leading/trailing spaces near the first equals sign?</span></span>
<span><span class="co">#&gt; 14  Check 3: Do all variables of TYPE encoded have at least one VALUES entry?</span></span>
<span><span class="co">#&gt; 15            Check 4: Are all variables with VALUES entries of TYPE encoded?</span></span>
<span><span class="co">#&gt; 16            Check 4: Are all variables with VALUES entries of TYPE encoded?</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; --------------------</span></span>
<span><span class="co">#&gt; misc_format_check: Failed </span></span>
<span><span class="co">#&gt; ERROR: at least one check failed. </span></span>
<span><span class="co">#&gt; $misc_formatting_check.Info</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 9 × 6</span></span></span>
<span><span class="co">#&gt;   check.name check.description                   check…¹ details col.n…² correct</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Check 1    Empty variable name check           Passed  <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Check 2    Duplicate variable name check       Passed  <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Check 3    Check for use of `dbgap` in variab… Passed  <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Check 4    Duplicate dictionary column name c… Passed  <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> Check 5    Column names after `VALUES` should… Failed  <span style="color: #BB0000;">NA</span>      VALUES2 FALSE  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> Check 5    Column names after `VALUES` should… Failed  <span style="color: #BB0000;">NA</span>      VALUES3 FALSE  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">7</span> Check 5    Column names after `VALUES` should… Failed  <span style="color: #BB0000;">NA</span>      VALUES4 FALSE  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">8</span> Check 5    Column names after `VALUES` should… Failed  <span style="color: #BB0000;">NA</span>      VALUES5 FALSE  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">9</span> Check 5    Column names after `VALUES` should… Failed  <span style="color: #BB0000;">NA</span>      VALUES6 FALSE  </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with abbreviated variable names ¹​check.status, ²​col.name</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; --------------------</span></span>
<span><span class="co">#&gt; description_check: Failed </span></span>
<span><span class="co">#&gt; ERROR: missing and duplicate descriptions found in data dictionary. </span></span>
<span><span class="co">#&gt; $description_check.Info</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 2</span></span></span>
<span><span class="co">#&gt;   VARNAME  VARDESC</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> PREGNANT <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> REACT    <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; --------------------</span></span></code></pre></div>
<p>In example 2, we see that the first three checks
(<code>field_check</code>, <code>pkg_field_check</code>, and
<code>dimension_check</code>) and several others further down the
workflow pass, but the fourth check (<code>name_check</code>) fails.
Looking at the <code>check_report</code> output more closely, we see
that there are two variables with names that do not match between the
data dictionary and data set.</p>
<p>Before we move on to investigate this issue further, please note that
we could arrive at the same conclusion using the functions individually
(rather than the complete workflow approach implemented in
<code>check_report</code>):</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/field_check.html">field_check</a></span><span class="op">(</span><span class="va">DD.dict.L</span><span class="op">)</span> <span class="co"># pass</span></span>
<span><span class="co">#&gt; $Message</span></span>
<span><span class="co">#&gt; [1] "Passed: required fields VARNAME, VARDESC, UNITS, and VALUES present in the data dictionary."</span></span>
<span><span class="fu"><a href="../reference/pkg_field_check.html">pkg_field_check</a></span><span class="op">(</span><span class="va">DD.dict.L</span><span class="op">)</span> <span class="co"># pass</span></span>
<span><span class="co">#&gt; $Message</span></span>
<span><span class="co">#&gt; [1] "Passed: package-level required fields TYPE, MIN, and MAX present in the data dictionary."</span></span>
<span><span class="fu"><a href="../reference/dimension_check.html">dimension_check</a></span><span class="op">(</span><span class="va">DD.dict.L</span>, <span class="va">DS.data.L</span><span class="op">)</span> <span class="co"># pass</span></span>
<span><span class="co">#&gt; $Message</span></span>
<span><span class="co">#&gt; [1] "Passed: the variable count matches between the data dictionary and the data."</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $Information</span></span>
<span><span class="co">#&gt; Variables in dictionary       Variables in data </span></span>
<span><span class="co">#&gt;                      30                      30</span></span>
<span><span class="fu"><a href="../reference/name_check.html">name_check</a></span><span class="op">(</span><span class="va">DD.dict.L</span>, <span class="va">DS.data.L</span><span class="op">)</span> <span class="co"># failed</span></span>
<span><span class="co">#&gt; $Message</span></span>
<span><span class="co">#&gt; [1] "ERROR: the variable names DO NOT match between the data dictionary and the data. If the intention behind the variable names is correct, consider using the name_correct function to automatically rename variables to match."</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $Information</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 2</span></span></span>
<span><span class="co">#&gt;   Data                Dict                 </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Data: SMOKING_HX    Dict: SMOKING_HISTORY</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Data: HX_DEPRESSION Dict: DEPRESSION_HX</span></span></code></pre></div>
<p>In looking more closely at the <code>name_check</code> output, we
then see that, while the “intent” between the names match (i.e., “hx” is
sometimes used as shorthand for “history”), there are a couple of
discrepancies between the data dictionary and data set. Luckily, we have
included a “quick fix” for this simple issue as implemented in the
<code>name_correct</code> function so that you can continue working
through the checks. Specifically, <code>name_correct</code> updates the
names in the data set to match the names listed in the data dictionary.
Similarly, if the variable names in the data dictionary and data set
matched identically, but were in the wrong order, the
<code>reorder_dictionary</code> function could be used to create a new
version of the data dictionary to match the order presented in the data
set (see Example 5)! Back to the example at hand, though – let’s give
the <code>name_correct</code> function a try now!</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">DS.data_updated</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/name_correct.html">name_correct</a></span><span class="op">(</span><span class="va">DD.dict.L</span>, <span class="va">DS.data.L</span><span class="op">)</span></span>
<span><span class="co">#&gt; $Message</span></span>
<span><span class="co">#&gt; [1] "CORRECTED ERROR: the variable names differ between the data dictionary and the data. **ALERT** Renaming variable(s) to match those listed in the data dictionary."</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $Information</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 3</span></span></span>
<span><span class="co">#&gt;   Data                              Dict                             New.Data   </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Original data name: SMOKING_HX    Dictionary name: SMOKING_HISTORY New data n…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Original data name: HX_DEPRESSION Dictionary name: DEPRESSION_HX   New data n…</span></span></code></pre></div>
<p>Now that our error has been corrected, let’s return to
<code>check_report</code>. Similar to above, be sure to call in our
updated data set!</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Calling in updated data set</span></span>
<span><span class="va">e2_report.v2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/check_report.html">check_report</a></span><span class="op">(</span><span class="va">DD.dict.L</span>, <span class="va">DS.data_updated</span>,</span>
<span>              non.NA.missing.codes<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">4444</span>, <span class="op">-</span><span class="fl">9999</span><span class="op">)</span><span class="op">)</span> </span>
<span><span class="co">#&gt; Warning: Expected 2 pieces. Missing pieces filled with `NA` in 1 rows</span></span>
<span><span class="co">#&gt; [3].</span></span>
<span><span class="co">#&gt; Warning: Expected 2 pieces. Missing pieces filled with `NA` in 1 rows [1].</span></span>
<span><span class="co">#&gt; Expected 2 pieces. Missing pieces filled with `NA` in 1 rows [1].</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 15 × 3</span></span></span>
<span><span class="co">#&gt;    Function            Status Message                                           </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> field_check         Passed Passed: required fields VARNAME, VARDESC, UNITS, …</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> pkg_field_check     Passed Passed: package-level required fields TYPE, MIN, …</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> dimension_check     Passed Passed: the variable count matches between the da…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> name_check          Passed Passed: the variable names match between the data…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> id_check            Passed Passed: All ID variable checks passed.            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> row_check           Passed Passed: no blank or duplicate rows detected in da…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> NA_check            Passed Passed: no NA values detected in data set.        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> type_check          Passed Passed: All TYPE entries found are accepted by db…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> values_check        Failed ERROR: at least one VALUES check flagged potentia…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> integer_check       Failed ERROR: some variables listed as TYPE integer do n…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> decimal_check       Failed ERROR: some variables listed as TYPE decimal do n…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span> misc_format_check   Failed ERROR: at least one check failed.                 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span> description_check   Failed ERROR: missing and duplicate descriptions found i…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">14</span> minmax_check        Failed ERROR: some variables have values outside of the …</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">15</span> missing_value_check Failed ERROR: some variables have non-encoded missing va…</span></span>
<span><span class="co">#&gt; --------------------</span></span>
<span><span class="co">#&gt; values_check: Failed </span></span>
<span><span class="co">#&gt; ERROR: at least one VALUES check flagged potentials issues. See Information for more details. </span></span>
<span><span class="co">#&gt; $values_check.Info</span></span>
<span><span class="co">#&gt;    column_name values.check            vname                   type</span></span>
<span><span class="co">#&gt; 4      VALUES3        FALSE         CUFFSIZE integer, encoded value</span></span>
<span><span class="co">#&gt; 6       VALUES        FALSE              HTN integer, encoded value</span></span>
<span><span class="co">#&gt; 7       VALUES        FALSE PERCEIVED_HEALTH integer, encoded value</span></span>
<span><span class="co">#&gt; 9      VALUES5        FALSE               28 integer, encoded value</span></span>
<span><span class="co">#&gt; 10     VALUES4        FALSE               28 integer, encoded value</span></span>
<span><span class="co">#&gt; 12     VALUES2        FALSE               16 integer, encoded value</span></span>
<span><span class="co">#&gt; 14      VALUES        FALSE           RESIST integer, encoded value</span></span>
<span><span class="co">#&gt; 15      VALUES        FALSE        SAMPLE_ID                integer</span></span>
<span><span class="co">#&gt; 16      VALUES        FALSE              SEX                integer</span></span>
<span><span class="co">#&gt;                                                   problematic_description</span></span>
<span><span class="co">#&gt; 4                                                           2 means large</span></span>
<span><span class="co">#&gt; 6                                                          0 indicates no</span></span>
<span><span class="co">#&gt; 7  Between 1 and 10 with higher values indicating better perceived health</span></span>
<span><span class="co">#&gt; 9                                                        5 = a great deal</span></span>
<span><span class="co">#&gt; 10                                                        4 = quite a bit</span></span>
<span><span class="co">#&gt; 12                                                              1 =medium</span></span>
<span><span class="co">#&gt; 14                                                                   &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 15                                                    -9999=missing value</span></span>
<span><span class="co">#&gt; 16                                                                 0=male</span></span>
<span><span class="co">#&gt;                                                                         check</span></span>
<span><span class="co">#&gt; 4                  Check 1: Is an equals sign present for all values columns?</span></span>
<span><span class="co">#&gt; 6                  Check 1: Is an equals sign present for all values columns?</span></span>
<span><span class="co">#&gt; 7                  Check 1: Is an equals sign present for all values columns?</span></span>
<span><span class="co">#&gt; 9  Check 2: Are there any leading/trailing spaces near the first equals sign?</span></span>
<span><span class="co">#&gt; 10 Check 2: Are there any leading/trailing spaces near the first equals sign?</span></span>
<span><span class="co">#&gt; 12 Check 2: Are there any leading/trailing spaces near the first equals sign?</span></span>
<span><span class="co">#&gt; 14  Check 3: Do all variables of TYPE encoded have at least one VALUES entry?</span></span>
<span><span class="co">#&gt; 15            Check 4: Are all variables with VALUES entries of TYPE encoded?</span></span>
<span><span class="co">#&gt; 16            Check 4: Are all variables with VALUES entries of TYPE encoded?</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; --------------------</span></span>
<span><span class="co">#&gt; integer_check: Failed </span></span>
<span><span class="co">#&gt; ERROR: some variables listed as TYPE integer do not appear to be integers. </span></span>
<span><span class="co">#&gt; $integer_check.Info</span></span>
<span><span class="co">#&gt; [1] "BP_DIASTOLIC"    "SMOKING_HISTORY"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; --------------------</span></span>
<span><span class="co">#&gt; decimal_check: Failed </span></span>
<span><span class="co">#&gt; ERROR: some variables listed as TYPE decimal do not appear to be decimals. </span></span>
<span><span class="co">#&gt; $decimal_check.Info</span></span>
<span><span class="co">#&gt; [1] "ABD_SKF" "SUP_SKF"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; --------------------</span></span>
<span><span class="co">#&gt; misc_format_check: Failed </span></span>
<span><span class="co">#&gt; ERROR: at least one check failed. </span></span>
<span><span class="co">#&gt; $misc_formatting_check.Info</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 9 × 6</span></span></span>
<span><span class="co">#&gt;   check.name check.description                   check…¹ details col.n…² correct</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Check 1    Empty variable name check           Passed  <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Check 2    Duplicate variable name check       Passed  <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Check 3    Check for use of `dbgap` in variab… Passed  <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Check 4    Duplicate dictionary column name c… Passed  <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> Check 5    Column names after `VALUES` should… Failed  <span style="color: #BB0000;">NA</span>      VALUES2 FALSE  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> Check 5    Column names after `VALUES` should… Failed  <span style="color: #BB0000;">NA</span>      VALUES3 FALSE  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">7</span> Check 5    Column names after `VALUES` should… Failed  <span style="color: #BB0000;">NA</span>      VALUES4 FALSE  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">8</span> Check 5    Column names after `VALUES` should… Failed  <span style="color: #BB0000;">NA</span>      VALUES5 FALSE  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">9</span> Check 5    Column names after `VALUES` should… Failed  <span style="color: #BB0000;">NA</span>      VALUES6 FALSE  </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with abbreviated variable names ¹​check.status, ²​col.name</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; --------------------</span></span>
<span><span class="co">#&gt; description_check: Failed </span></span>
<span><span class="co">#&gt; ERROR: missing and duplicate descriptions found in data dictionary. </span></span>
<span><span class="co">#&gt; $description_check.Info</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 2</span></span></span>
<span><span class="co">#&gt;   VARNAME  VARDESC</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> PREGNANT <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> REACT    <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; --------------------</span></span>
<span><span class="co">#&gt; minmax_check: Failed </span></span>
<span><span class="co">#&gt; ERROR: some variables have values outside of the MIN to MAX range. </span></span>
<span><span class="co">#&gt; $minmax_check.Info</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 5</span></span></span>
<span><span class="co">#&gt;   Trait              Check ListedMin ListedMax OutOfRangeValues</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> PERCEIVED_CONFLICT FALSE         1        15 <span style="color: #949494;">&lt;int [11]&gt;</span>      </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; --------------------</span></span>
<span><span class="co">#&gt; missing_value_check: Failed </span></span>
<span><span class="co">#&gt; ERROR: some variables have non-encoded missing value codes. </span></span>
<span><span class="co">#&gt; $missing_value_check.Info</span></span>
<span><span class="co">#&gt;     VARNAME VALUE MEANING  PASS</span></span>
<span><span class="co">#&gt; 14   RESIST -9999    &lt;NA&gt; FALSE</span></span>
<span><span class="co">#&gt; 16 CUFFSIZE -9999    &lt;NA&gt; FALSE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; --------------------</span></span></code></pre></div>
<p>We now see that <code>name_check</code> now passes, along with
several other functions in the workflow, but we have failed on
<code>values_check</code> and several others.</p>
<p>Investigating this check failure further by looking at the
<code>check_report</code> output, we see a few issues that, due to the
subjectivity and complexity of different data set, will need to be
manually corrected before moving on. For the purposes of this tutorial,
we will now leave this data set to move on to a new one, but in reality,
we would correct this issue and return again to
<code>check_report</code>.</p>
</div>
<div class="section level4" number="5.1.3">
<h4 id="example-3">
<span class="header-section-number">5.1.3</span> Example 3<a class="anchor" aria-label="anchor" href="#example-3"></a>
</h4>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">ExampleB</span><span class="op">)</span></span></code></pre></div>
<p>Again, we will start with the <code>check_report</code> function.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">e3_report</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/check_report.html">check_report</a></span><span class="op">(</span><span class="va">DD.dict.B</span>, <span class="va">DS.data.B</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 15 × 3</span></span></span>
<span><span class="co">#&gt;    Function            Status Message                                           </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> field_check         Passed Passed: required fields VARNAME, VARDESC, UNITS, …</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> pkg_field_check     Passed Passed: package-level required fields TYPE, MIN, …</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> dimension_check     Passed Passed: the variable count matches between the da…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> name_check          Passed Passed: the variable names match between the data…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> id_check            Passed Passed: All ID variable checks passed.            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> row_check           Passed Passed: no blank or duplicate rows detected in da…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> NA_check            Passed Passed: no NA values detected in data set.        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> type_check          Passed Passed: All TYPE entries found are accepted by db…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> values_check        Passed Passed: all four VALUES checks look good.         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> integer_check       Passed Passed: all variables listed as TYPE integer appe…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> decimal_check       Passed Passed: all variables listed as TYPE decimal appe…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span> misc_format_check   Passed Passed: no check-specific formatting issues ident…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span> description_check   Passed Passed: unique description present for all variab…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">14</span> minmax_check        Passed Passed: when provided, all variables are within t…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">15</span> missing_value_check Passed Passed: all missing value codes have a correspond…</span></span>
<span><span class="co">#&gt; [1] "All 15 checks passed."</span></span></code></pre></div>
<p>In the above chunk, <code>check_report</code> determines that all 15
checks were passed! But ALERT — this is misleading a we forgot to
include an important parameter!!!!! Rerunning the check with our missing
value codes defined, we now see an issue at
<code>missing_value_check</code>, which underscores the importance of
specifying missing value codes.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">e3_report.v2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/check_report.html">check_report</a></span><span class="op">(</span><span class="va">DD.dict.B</span>, <span class="va">DS.data.B</span>, non.NA.missing.codes<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">9999</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 15 × 3</span></span></span>
<span><span class="co">#&gt;    Function            Status Message                                           </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> field_check         Passed Passed: required fields VARNAME, VARDESC, UNITS, …</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> pkg_field_check     Passed Passed: package-level required fields TYPE, MIN, …</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> dimension_check     Passed Passed: the variable count matches between the da…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> name_check          Passed Passed: the variable names match between the data…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> id_check            Passed Passed: All ID variable checks passed.            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> row_check           Passed Passed: no blank or duplicate rows detected in da…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> NA_check            Passed Passed: no NA values detected in data set.        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> type_check          Passed Passed: All TYPE entries found are accepted by db…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> values_check        Passed Passed: all four VALUES checks look good.         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> integer_check       Passed Passed: all variables listed as TYPE integer appe…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> decimal_check       Passed Passed: all variables listed as TYPE decimal appe…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span> misc_format_check   Passed Passed: no check-specific formatting issues ident…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span> description_check   Passed Passed: unique description present for all variab…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">14</span> minmax_check        Passed Passed: when provided, all variables are within t…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">15</span> missing_value_check Failed ERROR: some variables have non-encoded missing va…</span></span>
<span><span class="co">#&gt; --------------------</span></span>
<span><span class="co">#&gt; missing_value_check: Failed </span></span>
<span><span class="co">#&gt; ERROR: some variables have non-encoded missing value codes. </span></span>
<span><span class="co">#&gt; $missing_value_check.Info</span></span>
<span><span class="co">#&gt;     VARNAME VALUE MEANING  PASS</span></span>
<span><span class="co">#&gt; 13 CUFFSIZE -9999    &lt;NA&gt; FALSE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; --------------------</span></span></code></pre></div>
<p>If you are not immediately sure what your missing value codes are,
you can use our <code>value_meaning_table</code> utility/awareness
function.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/value_meaning_table.html">value_meaning_table</a></span><span class="op">(</span><span class="va">DD.dict.B</span><span class="op">)</span></span>
<span><span class="co">#&gt;                 VARNAME                   TYPE VALUE</span></span>
<span><span class="co">#&gt; 2             SAMPLE_ID integer, encoded value -9999</span></span>
<span><span class="co">#&gt; 3                   SEX integer, encoded value     0</span></span>
<span><span class="co">#&gt; 4                   SEX integer, encoded value     1</span></span>
<span><span class="co">#&gt; 5                HEIGHT decimal, encoded value -9999</span></span>
<span><span class="co">#&gt; 6                WEIGHT decimal, encoded value -9999</span></span>
<span><span class="co">#&gt; 7                   BMI decimal, encoded value -9999</span></span>
<span><span class="co">#&gt; 8               OBESITY integer, encoded value     0</span></span>
<span><span class="co">#&gt; 9               OBESITY integer, encoded value     1</span></span>
<span><span class="co">#&gt; 10              OBESITY integer, encoded value -9999</span></span>
<span><span class="co">#&gt; 11             ABD_CIRC decimal, encoded value -9999</span></span>
<span><span class="co">#&gt; 12             HIP_CIRC decimal, encoded value -9999</span></span>
<span><span class="co">#&gt; 13              ABD_SKF integer, encoded value -9999</span></span>
<span><span class="co">#&gt; 14              SUP_SKF integer, encoded value -9999</span></span>
<span><span class="co">#&gt; 15               RESIST integer, encoded value -9999</span></span>
<span><span class="co">#&gt; 16                REACT integer, encoded value -9999</span></span>
<span><span class="co">#&gt; 17             CUFFSIZE integer, encoded value     0</span></span>
<span><span class="co">#&gt; 18             CUFFSIZE integer, encoded value     1</span></span>
<span><span class="co">#&gt; 19             CUFFSIZE integer, encoded value     2</span></span>
<span><span class="co">#&gt; 20             CUFFSIZE integer, encoded value     3</span></span>
<span><span class="co">#&gt; 21          BP_SYSTOLIC integer, encoded value -9999</span></span>
<span><span class="co">#&gt; 22         BP_DIASTOLIC integer, encoded value -9999</span></span>
<span><span class="co">#&gt; 23                  HTN integer, encoded value     0</span></span>
<span><span class="co">#&gt; 24                  HTN integer, encoded value     1</span></span>
<span><span class="co">#&gt; 25                  HTN integer, encoded value -9999</span></span>
<span><span class="co">#&gt; 26           SMOKING_HX integer, encoded value     0</span></span>
<span><span class="co">#&gt; 27           SMOKING_HX integer, encoded value     1</span></span>
<span><span class="co">#&gt; 28           SMOKING_HX integer, encoded value -9999</span></span>
<span><span class="co">#&gt; 29 LENGTH_SMOKING_YEARS decimal, encoded value -9999</span></span>
<span><span class="co">#&gt; 30 LENGTH_SMOKING_YEARS decimal, encoded value -4444</span></span>
<span><span class="co">#&gt; 31           HEART_RATE integer, encoded value -9999</span></span>
<span><span class="co">#&gt; 32    PHYSICAL_ACTIVITY integer, encoded value -9999</span></span>
<span><span class="co">#&gt; 33                HX_DM integer, encoded value     0</span></span>
<span><span class="co">#&gt; 34                HX_DM integer, encoded value     1</span></span>
<span><span class="co">#&gt; 35                HX_DM integer, encoded value -9999</span></span>
<span><span class="co">#&gt; 36            HX_STROKE integer, encoded value     0</span></span>
<span><span class="co">#&gt; 37            HX_STROKE integer, encoded value     1</span></span>
<span><span class="co">#&gt; 38            HX_STROKE integer, encoded value -9999</span></span>
<span><span class="co">#&gt; 39           HX_ANXIETY integer, encoded value     0</span></span>
<span><span class="co">#&gt; 40           HX_ANXIETY integer, encoded value     1</span></span>
<span><span class="co">#&gt; 41           HX_ANXIETY integer, encoded value -9999</span></span>
<span><span class="co">#&gt; 42        HX_DEPRESSION integer, encoded value     0</span></span>
<span><span class="co">#&gt; 43        HX_DEPRESSION integer, encoded value     1</span></span>
<span><span class="co">#&gt; 44        HX_DEPRESSION integer, encoded value -9999</span></span>
<span><span class="co">#&gt; 45       SOCIAL_SUPPORT integer, encoded value     1</span></span>
<span><span class="co">#&gt; 46       SOCIAL_SUPPORT integer, encoded value     2</span></span>
<span><span class="co">#&gt; 47       SOCIAL_SUPPORT integer, encoded value     3</span></span>
<span><span class="co">#&gt; 48       SOCIAL_SUPPORT integer, encoded value     4</span></span>
<span><span class="co">#&gt; 49       SOCIAL_SUPPORT integer, encoded value     5</span></span>
<span><span class="co">#&gt; 50   PERCEIVED_CONFLICT integer, encoded value     1</span></span>
<span><span class="co">#&gt; 51   PERCEIVED_CONFLICT integer, encoded value    30</span></span>
<span><span class="co">#&gt; 52     PERCEIVED_HEALTH integer, encoded value     1</span></span>
<span><span class="co">#&gt; 53     PERCEIVED_HEALTH integer, encoded value    10</span></span>
<span><span class="co">#&gt;                                  MEANING</span></span>
<span><span class="co">#&gt; 2                          missing value</span></span>
<span><span class="co">#&gt; 3                                   male</span></span>
<span><span class="co">#&gt; 4                                 female</span></span>
<span><span class="co">#&gt; 5                          missing value</span></span>
<span><span class="co">#&gt; 6                          missing value</span></span>
<span><span class="co">#&gt; 7                          missing value</span></span>
<span><span class="co">#&gt; 8                                     no</span></span>
<span><span class="co">#&gt; 9                                    yes</span></span>
<span><span class="co">#&gt; 10                         missing value</span></span>
<span><span class="co">#&gt; 11                         missing value</span></span>
<span><span class="co">#&gt; 12                         missing value</span></span>
<span><span class="co">#&gt; 13                         missing value</span></span>
<span><span class="co">#&gt; 14                         missing value</span></span>
<span><span class="co">#&gt; 15                         missing value</span></span>
<span><span class="co">#&gt; 16                         missing value</span></span>
<span><span class="co">#&gt; 17                                 small</span></span>
<span><span class="co">#&gt; 18                                medium</span></span>
<span><span class="co">#&gt; 19                                 large</span></span>
<span><span class="co">#&gt; 20                           extra large</span></span>
<span><span class="co">#&gt; 21                         missing value</span></span>
<span><span class="co">#&gt; 22                         missing value</span></span>
<span><span class="co">#&gt; 23                                    no</span></span>
<span><span class="co">#&gt; 24                                   yes</span></span>
<span><span class="co">#&gt; 25                         missing value</span></span>
<span><span class="co">#&gt; 26                                    no</span></span>
<span><span class="co">#&gt; 27                                   yes</span></span>
<span><span class="co">#&gt; 28                         missing value</span></span>
<span><span class="co">#&gt; 29                         missing value</span></span>
<span><span class="co">#&gt; 30 not applicable, no history of smoking</span></span>
<span><span class="co">#&gt; 31                         missing value</span></span>
<span><span class="co">#&gt; 32                         missing value</span></span>
<span><span class="co">#&gt; 33                                    no</span></span>
<span><span class="co">#&gt; 34                                   yes</span></span>
<span><span class="co">#&gt; 35                         missing value</span></span>
<span><span class="co">#&gt; 36                                    no</span></span>
<span><span class="co">#&gt; 37                                   yes</span></span>
<span><span class="co">#&gt; 38                         missing value</span></span>
<span><span class="co">#&gt; 39                                    no</span></span>
<span><span class="co">#&gt; 40                                   yes</span></span>
<span><span class="co">#&gt; 41                         missing value</span></span>
<span><span class="co">#&gt; 42                                    no</span></span>
<span><span class="co">#&gt; 43                                   yes</span></span>
<span><span class="co">#&gt; 44                         missing value</span></span>
<span><span class="co">#&gt; 45                           very little</span></span>
<span><span class="co">#&gt; 46                                little</span></span>
<span><span class="co">#&gt; 47                              moderate</span></span>
<span><span class="co">#&gt; 48                           quite a bit</span></span>
<span><span class="co">#&gt; 49                          a great deal</span></span>
<span><span class="co">#&gt; 50       lowest possible social conflict</span></span>
<span><span class="co">#&gt; 51      highest possible social conflict</span></span>
<span><span class="co">#&gt; 52     poorest possible perceived health</span></span>
<span><span class="co">#&gt; 53        best possible perceived health</span></span></code></pre></div>
<p>So here we see that -9999 is a verified missing value code in this
example.</p>
</div>
<div class="section level4" number="5.1.4">
<h4 id="example-4">
<span class="header-section-number">5.1.4</span> Example 4<a class="anchor" aria-label="anchor" href="#example-4"></a>
</h4>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">ExampleH</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">e4_report</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/check_report.html">check_report</a></span><span class="op">(</span><span class="va">DD.dict.H</span>, <span class="va">DS.data.H</span>, non.NA.missing.codes<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">4444</span>, <span class="op">-</span><span class="fl">9999</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 15 × 3</span></span></span>
<span><span class="co">#&gt;    Function            Status Message                                           </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> field_check         Passed Passed: required fields VARNAME, VARDESC, UNITS, …</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> pkg_field_check     Passed Passed: package-level required fields TYPE, MIN, …</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> dimension_check     Passed Passed: the variable count matches between the da…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> name_check          Passed Passed: the variable names match between the data…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> id_check            Passed Passed: All ID variable checks passed.            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> row_check           Passed Passed: no blank or duplicate rows detected in da…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> NA_check            Passed Passed: no NA values detected in data set.        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> type_check          Passed Passed: All TYPE entries found are accepted by db…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> values_check        Passed Passed: all four VALUES checks look good.         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> integer_check       Failed ERROR: some variables listed as TYPE integer do n…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> decimal_check       Passed Passed: all variables listed as TYPE decimal appe…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span> misc_format_check   Passed Passed: no check-specific formatting issues ident…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span> description_check   Passed Passed: unique description present for all variab…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">14</span> minmax_check        Passed Passed: when provided, all variables are within t…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">15</span> missing_value_check Passed Passed: all missing value codes have a correspond…</span></span>
<span><span class="co">#&gt; --------------------</span></span>
<span><span class="co">#&gt; integer_check: Failed </span></span>
<span><span class="co">#&gt; ERROR: some variables listed as TYPE integer do not appear to be integers. </span></span>
<span><span class="co">#&gt; $integer_check.Info</span></span>
<span><span class="co">#&gt; [1] "SUP_SKF"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; --------------------</span></span></code></pre></div>
<p>Note that in this example, we see an error at
<code>integer_check</code>. Let’s investigate this further.</p>
<p>Specifically, we can use the awareness function to grep (i.e.,
search) for this variable name in the dictionary.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/dictionary_search.html">dictionary_search</a></span><span class="op">(</span><span class="va">DD.dict.H</span>, search.term<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"SUP_SKF"</span><span class="op">)</span>, search.column<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"VARNAME"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 22</span></span></span>
<span><span class="co">#&gt;   VARNAME VARDESC        DOCFILE TYPE  UNITS   MIN   MAX RESOL…¹ COMME…² COMME…³</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> SUP_SKF Suprailiac sk… <span style="color: #BB0000;">NA</span>      inte… mm       <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span> <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 12 more variables: VARIABLE_SOURCE &lt;lgl&gt;, SOURCE_VARIABLE_ID &lt;lgl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   VARIABLE_MAPPING &lt;lgl&gt;, UNIQUEKEY &lt;lgl&gt;, COLLINTERVAL &lt;lgl&gt;, ORDER &lt;lgl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   VALUES &lt;chr&gt;, ...18 &lt;chr&gt;, ...19 &lt;chr&gt;, ...20 &lt;chr&gt;, ...21 &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ...22 &lt;chr&gt;, and abbreviated variable names ¹​RESOLUTION, ²​COMMENT1,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ³​COMMENT2</span></span></span></code></pre></div>
<p>We can also look at the values in the data set to see that, in fact,
there are some values that are decimals (not integers as the dictionary
suggests).</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">DS.data.H</span><span class="op">$</span><span class="va">SUP_SKF</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  -9999     12     22 23.888     24     25     26     27     28 28.254     29 </span></span>
<span><span class="co">#&gt;      3      2      4      1      4     11      4      6      2      1      1 </span></span>
<span><span class="co">#&gt;     34     35     36     37     38     39  39.12     40     42     44     45 </span></span>
<span><span class="co">#&gt;      4      7      3      2      3      6      1      9      2      6      3 </span></span>
<span><span class="co">#&gt;     46     48     51     52 </span></span>
<span><span class="co">#&gt;      4      3      2      6</span></span></code></pre></div>
<p>We can also use this awareness function to grep any variables that
are described as “skinfold” measurements to evaluate data
<code>TYPE</code> across variables.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/dictionary_search.html">dictionary_search</a></span><span class="op">(</span><span class="va">DD.dict.H</span>, search.term<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"skinfold"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 22</span></span></span>
<span><span class="co">#&gt;   VARNAME VARDESC        DOCFILE TYPE  UNITS   MIN   MAX RESOL…¹ COMME…² COMME…³</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> ABD_SKF Abdominal ski… <span style="color: #BB0000;">NA</span>      inte… mm       <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span> <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> SUP_SKF Suprailiac sk… <span style="color: #BB0000;">NA</span>      inte… mm       <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span> <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 12 more variables: VARIABLE_SOURCE &lt;lgl&gt;, SOURCE_VARIABLE_ID &lt;lgl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   VARIABLE_MAPPING &lt;lgl&gt;, UNIQUEKEY &lt;lgl&gt;, COLLINTERVAL &lt;lgl&gt;, ORDER &lt;lgl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   VALUES &lt;chr&gt;, ...18 &lt;chr&gt;, ...19 &lt;chr&gt;, ...20 &lt;chr&gt;, ...21 &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ...22 &lt;chr&gt;, and abbreviated variable names ¹​RESOLUTION, ²​COMMENT1,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ³​COMMENT2</span></span></span></code></pre></div>
<p>Above we see that both abdominal and suprailiac skinfold thickness
are listed as integers in the data dictionary, and thought to have been
measured to the nearest mm.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">DS.data.H</span><span class="op">$</span><span class="va">ABD_SKF</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; -9999    14    18    21    22    23    24    25    26    27    28    29    30 </span></span>
<span><span class="co">#&gt;     3     1     2     2     1     4    11    22     4     1     6     4     2 </span></span>
<span><span class="co">#&gt;    31    32    34    35    36    38    39    40    41    42    45    51    54 </span></span>
<span><span class="co">#&gt;     3     2     5     4     5     6     2     1     1     1     1     1     1 </span></span>
<span><span class="co">#&gt;    61    65    68 </span></span>
<span><span class="co">#&gt;     2     1     1</span></span></code></pre></div>
<p>While <code>ABD_SKF</code> appears to be a true integer,
<code>SUP_SKF</code> appears to have some decimal places. This error
could be corrected either by listing <code>SUP_SKF</code> as
<code>TYPE</code> decimal, or by investigating if the data set has a
measurement/recording error.</p>
</div>
<div class="section level4" number="5.1.5">
<h4 id="example-5">
<span class="header-section-number">5.1.5</span> Example 5<a class="anchor" aria-label="anchor" href="#example-5"></a>
</h4>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">ExampleN</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">d5_report</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/check_report.html">check_report</a></span><span class="op">(</span><span class="va">DD.dict.N</span>, <span class="va">DS.data.N</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 15 × 3</span></span></span>
<span><span class="co">#&gt;    Function            Status        Message                                    </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> field_check         Passed        Passed: required fields VARNAME, VARDESC, …</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> pkg_field_check     Passed        Passed: package-level required fields TYPE…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> dimension_check     Passed        Passed: the variable count matches between…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> name_check          Failed        ERROR: the variable names match between th…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> id_check            Passed        Passed: All ID variable checks passed.     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> row_check           Passed        Passed: no blank or duplicate rows detecte…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> NA_check            Not attempted ERROR: Required pre-check name_check faile…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> type_check          Passed        Passed: All TYPE entries found are accepte…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> values_check        Failed        ERROR: at least one VALUES check flagged p…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> integer_check       Not attempted ERROR: Required pre-check name_check faile…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> decimal_check       Not attempted ERROR: Required pre-check name_check faile…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span> misc_format_check   Failed        ERROR: at least one check failed.          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span> description_check   Failed        ERROR: missing and duplicate descriptions …</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">14</span> minmax_check        Not attempted ERROR: Required pre-check name_check faile…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">15</span> missing_value_check Not attempted ERROR: Required pre-check name_check faile…</span></span>
<span><span class="co">#&gt; --------------------</span></span>
<span><span class="co">#&gt; name_check: Failed </span></span>
<span><span class="co">#&gt; ERROR: the variable names match between the data dictionary and the data, but they are in the wrong order. Consider using reorder_dictionary function to automatically reorder the dictionary so that you can continue working through the checks. </span></span>
<span><span class="co">#&gt; $name_check.Info</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 10 × 2</span></span></span>
<span><span class="co">#&gt;    Data                       Dict                      </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> Data: ABD_CIRC             Dict: HIP_CIRC            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> Data: HIP_CIRC             Dict: ABD_SKF             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> Data: ABD_SKF              Dict: SUP_SKF             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> Data: SUP_SKF              Dict: ABD_CIRC            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> Data: BP_DIASTOLIC         Dict: HTN                 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> Data: HTN                  Dict: SMOKING_HX          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> Data: SMOKING_HX           Dict: LENGTH_SMOKING_YEARS</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> Data: LENGTH_SMOKING_YEARS Dict: HEART_RATE          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> Data: HEART_RATE           Dict: PHYSICAL_ACTIVITY   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> Data: PHYSICAL_ACTIVITY    Dict: BP_DIASTOLIC        </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; --------------------</span></span>
<span><span class="co">#&gt; values_check: Failed </span></span>
<span><span class="co">#&gt; ERROR: at least one VALUES check flagged potentials issues. See Information for more details. </span></span>
<span><span class="co">#&gt; $values_check.Info</span></span>
<span><span class="co">#&gt;    column_name values.check            vname                   type</span></span>
<span><span class="co">#&gt; 4      VALUES3        FALSE         CUFFSIZE integer, encoded value</span></span>
<span><span class="co">#&gt; 6       VALUES        FALSE              HTN integer, encoded value</span></span>
<span><span class="co">#&gt; 7       VALUES        FALSE PERCEIVED_HEALTH integer, encoded value</span></span>
<span><span class="co">#&gt; 9      VALUES5        FALSE               28 integer, encoded value</span></span>
<span><span class="co">#&gt; 10     VALUES4        FALSE               28 integer, encoded value</span></span>
<span><span class="co">#&gt; 12     VALUES2        FALSE               16 integer, encoded value</span></span>
<span><span class="co">#&gt; 14      VALUES        FALSE           RESIST integer, encoded value</span></span>
<span><span class="co">#&gt; 15      VALUES        FALSE        SAMPLE_ID                integer</span></span>
<span><span class="co">#&gt; 16      VALUES        FALSE              SEX                integer</span></span>
<span><span class="co">#&gt;                                                   problematic_description</span></span>
<span><span class="co">#&gt; 4                                                           2 means large</span></span>
<span><span class="co">#&gt; 6                                                          0 indicates no</span></span>
<span><span class="co">#&gt; 7  Between 1 and 10 with higher values indicating better perceived health</span></span>
<span><span class="co">#&gt; 9                                                        5 = a great deal</span></span>
<span><span class="co">#&gt; 10                                                        4 = quite a bit</span></span>
<span><span class="co">#&gt; 12                                                              1 =medium</span></span>
<span><span class="co">#&gt; 14                                                                   &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 15                                                    -9999=missing value</span></span>
<span><span class="co">#&gt; 16                                                                 0=male</span></span>
<span><span class="co">#&gt;                                                                         check</span></span>
<span><span class="co">#&gt; 4                  Check 1: Is an equals sign present for all values columns?</span></span>
<span><span class="co">#&gt; 6                  Check 1: Is an equals sign present for all values columns?</span></span>
<span><span class="co">#&gt; 7                  Check 1: Is an equals sign present for all values columns?</span></span>
<span><span class="co">#&gt; 9  Check 2: Are there any leading/trailing spaces near the first equals sign?</span></span>
<span><span class="co">#&gt; 10 Check 2: Are there any leading/trailing spaces near the first equals sign?</span></span>
<span><span class="co">#&gt; 12 Check 2: Are there any leading/trailing spaces near the first equals sign?</span></span>
<span><span class="co">#&gt; 14  Check 3: Do all variables of TYPE encoded have at least one VALUES entry?</span></span>
<span><span class="co">#&gt; 15            Check 4: Are all variables with VALUES entries of TYPE encoded?</span></span>
<span><span class="co">#&gt; 16            Check 4: Are all variables with VALUES entries of TYPE encoded?</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; --------------------</span></span>
<span><span class="co">#&gt; misc_format_check: Failed </span></span>
<span><span class="co">#&gt; ERROR: at least one check failed. </span></span>
<span><span class="co">#&gt; $misc_formatting_check.Info</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 9 × 6</span></span></span>
<span><span class="co">#&gt;   check.name check.description                   check…¹ details col.n…² correct</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Check 1    Empty variable name check           Passed  <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Check 2    Duplicate variable name check       Passed  <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Check 3    Check for use of `dbgap` in variab… Passed  <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Check 4    Duplicate dictionary column name c… Passed  <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> Check 5    Column names after `VALUES` should… Failed  <span style="color: #BB0000;">NA</span>      VALUES2 FALSE  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> Check 5    Column names after `VALUES` should… Failed  <span style="color: #BB0000;">NA</span>      VALUES3 FALSE  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">7</span> Check 5    Column names after `VALUES` should… Failed  <span style="color: #BB0000;">NA</span>      VALUES4 FALSE  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">8</span> Check 5    Column names after `VALUES` should… Failed  <span style="color: #BB0000;">NA</span>      VALUES5 FALSE  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">9</span> Check 5    Column names after `VALUES` should… Failed  <span style="color: #BB0000;">NA</span>      VALUES6 FALSE  </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with abbreviated variable names ¹​check.status, ²​col.name</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; --------------------</span></span>
<span><span class="co">#&gt; description_check: Failed </span></span>
<span><span class="co">#&gt; ERROR: missing and duplicate descriptions found in data dictionary. </span></span>
<span><span class="co">#&gt; $description_check.Info</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 2</span></span></span>
<span><span class="co">#&gt;   VARNAME  VARDESC</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> PREGNANT <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> REACT    <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; --------------------</span></span></code></pre></div>
<p>In this example, dbGaPCheckup informs us several issues — let’s focus
first on the <code>name_check</code> results. While the variable names
match between the data dictionary and the data (in contrast to Example
2), they are in the wrong order. Instead of fixing this issue manually
outside of R, we can simply call the <code>reoder_dictionary</code>
function as a “quick fix” and run the <code>name_report</code> function
to confirm our update works!</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">DD.dict_updated</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/reorder_dictionary.html">reorder_dictionary</a></span><span class="op">(</span><span class="va">DD.dict.N</span>, <span class="va">DS.data.N</span><span class="op">)</span></span>
<span><span class="co">#&gt; $Message</span></span>
<span><span class="co">#&gt; [1] "CORRECTED ERROR: the variable names match between the data dictionary and the data, but they were in the wrong order. ***ALERT**** this function has temporarily reordered the dictionary to match the data so that you can continue working through the checks."</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $Information</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 10 × 3</span></span></span>
<span><span class="co">#&gt;    Data                       Dict                       New.Dict               </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> Data: ABD_CIRC             Dict: HIP_CIRC             Data: ABD_CIRC         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> Data: HIP_CIRC             Dict: ABD_SKF              Data: HIP_CIRC         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> Data: ABD_SKF              Dict: SUP_SKF              Data: ABD_SKF          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> Data: SUP_SKF              Dict: ABD_CIRC             Data: SUP_SKF          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> Data: BP_DIASTOLIC         Dict: HTN                  Data: BP_DIASTOLIC     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> Data: HTN                  Dict: SMOKING_HX           Data: HTN              </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> Data: SMOKING_HX           Dict: LENGTH_SMOKING_YEARS Data: SMOKING_HX       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> Data: LENGTH_SMOKING_YEARS Dict: HEART_RATE           Data: LENGTH_SMOKING_Y…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> Data: HEART_RATE           Dict: PHYSICAL_ACTIVITY    Data: HEART_RATE       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> Data: PHYSICAL_ACTIVITY    Dict: BP_DIASTOLIC         Data: PHYSICAL_ACTIVITY</span></span></code></pre></div>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Remember to call in the updated data dictionary!</span></span>
<span><span class="fu"><a href="../reference/name_check.html">name_check</a></span><span class="op">(</span><span class="va">DD.dict_updated</span>, <span class="va">DS.data.N</span><span class="op">)</span></span>
<span><span class="co">#&gt; $Message</span></span>
<span><span class="co">#&gt; [1] "Passed: the variable names match between the data dictionary and the data."</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $Information</span></span>
<span><span class="co">#&gt; [1] "Variable names matched"</span></span></code></pre></div>
<p>Above, we see that <code>name_check</code> now passes! Moving
forward, we could simply return to our <code>check_report</code>
workflow to search for other potential issues in finalizing our files
for dbGaP submission.</p>
</div>
<div class="section level4" number="5.1.6">
<h4 id="example-6">
<span class="header-section-number">5.1.6</span> Example 6<a class="anchor" aria-label="anchor" href="#example-6"></a>
</h4>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">ExampleA</span><span class="op">)</span></span></code></pre></div>
<p>As mentioned above, if you prefer, you can also simply run the
individual checks that you are interested in rather than taking the
complete workflow approach. Note that several package-specific
pre-checks are embedded in many of the functions (e.g.,
<code>integer_check</code>).</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/id_check.html">id_check</a></span><span class="op">(</span><span class="va">DS.data.A</span><span class="op">)</span></span>
<span><span class="co">#&gt; $Message</span></span>
<span><span class="co">#&gt; [1] "Passed: All ID variable checks passed."</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $Information</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 4</span></span></span>
<span><span class="co">#&gt;   check.name check.description                                 check.s…¹ details</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Check 1    Column 1 is labeled as 'SUBJECT_ID'.              Passed    The fi…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Check 2    'SUBJECT_ID' is a column name in the data set.    Passed    'SUBJE…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Check 3    'SUBJECT_ID' is a column name in the data set.    Passed    No ill…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Check 4    No leading zeros detected in 'SUBJECT_ID' column. Passed    No lea…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> Check 5    No missing values for 'SUBJECT_ID'.               Passed    No mis…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with abbreviated variable name ¹​check.status</span></span></span></code></pre></div>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/misc_format_check.html">misc_format_check</a></span><span class="op">(</span><span class="va">DD.dict.A</span>, <span class="va">DS.data.A</span><span class="op">)</span> </span>
<span><span class="co">#&gt; $Message</span></span>
<span><span class="co">#&gt; [1] "Passed: no check-specific formatting issues identified."</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $Information</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 4</span></span></span>
<span><span class="co">#&gt;   check.name check.description                           check.status details</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Check 1    Empty variable name check                   Passed       <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Check 2    Duplicate variable name check               Passed       <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Check 3    Check for use of `dbgap` in variable names  Passed       <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Check 4    Duplicate dictionary column name check      Passed       <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> Check 5    Column names after `VALUES` should be empty Passed       <span style="color: #BB0000;">NA</span></span></span></code></pre></div>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/row_check.html">row_check</a></span><span class="op">(</span><span class="va">DD.dict.A</span>, <span class="va">DS.data.A</span><span class="op">)</span></span>
<span><span class="co">#&gt; $Message</span></span>
<span><span class="co">#&gt; [1] "Passed: no blank or duplicate rows detected in data set or data dictionary."</span></span></code></pre></div>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/NA_check.html">NA_check</a></span><span class="op">(</span><span class="va">DD.dict.A</span>, <span class="va">DS.data.A</span><span class="op">)</span></span>
<span><span class="co">#&gt; $Message</span></span>
<span><span class="co">#&gt; [1] "Passed: no NA values detected in data set."</span></span></code></pre></div>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/minmax_check.html">minmax_check</a></span><span class="op">(</span><span class="va">DD.dict.A</span>, <span class="va">DS.data.A</span><span class="op">)</span></span>
<span><span class="co">#&gt; $Message</span></span>
<span><span class="co">#&gt; [1] "ERROR: some variables have values outside of the MIN to MAX range."</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $Information</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 5</span></span></span>
<span><span class="co">#&gt;   Trait    Check ListedMin ListedMax OutOfRangeValues</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> PREGNANT FALSE         0         1 <span style="color: #949494;">&lt;int [2]&gt;</span></span></span></code></pre></div>
<p>Above we see that an issue has been discovered at
<code>minmax_check</code>. Let’s investigate this further. The approach
to view the “out of range values” is a bit cryptic, but it can be done
with the following code.</p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/minmax_check.html">minmax_check</a></span><span class="op">(</span><span class="va">DD.dict.A</span>, <span class="va">DS.data.A</span><span class="op">)</span></span>
<span><span class="co">#&gt; $Message</span></span>
<span><span class="co">#&gt; [1] "ERROR: some variables have values outside of the MIN to MAX range."</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $Information</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 5</span></span></span>
<span><span class="co">#&gt;   Trait    Check ListedMin ListedMax OutOfRangeValues</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> PREGNANT FALSE         0         1 <span style="color: #949494;">&lt;int [2]&gt;</span></span></span>
<span><span class="va">b</span><span class="op">$</span><span class="va">Information</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">OutOfRangeValues</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt; [1] -4444 -9999</span></span></code></pre></div>
<p>Here we see that we forgot to specify our missing value codes when we
ran <code>minmax_check</code>, so they are being flagged as errors.
Let’s rerun the command specifying -4444 and -9999 as missing value
codes.</p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/minmax_check.html">minmax_check</a></span><span class="op">(</span><span class="va">DD.dict.A</span>, <span class="va">DS.data.A</span>, non.NA.missing.codes<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">4444</span>, <span class="op">-</span><span class="fl">9999</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; $Message</span></span>
<span><span class="co">#&gt; [1] "Passed: when provided, all variables are within the MIN to MAX range."</span></span></code></pre></div>
<p>Now we see that our check passed for this data set!</p>
</div>
</div>
<div class="section level3" number="5.2">
<h3 id="reporting-functions">
<span class="header-section-number">5.2</span> Reporting
functions<a class="anchor" aria-label="anchor" href="#reporting-functions"></a>
</h3>
<p>We have also created awareness and reporting functions that are not
built into the complete workflow approach. These functions generate
graphical and textual descriptions and awareness checks of the data in
HTML format. These reports are designed to help you catch other
potential errors in your data set. Note that the
<code>create_report</code> generated is quite long however, so we
recommend that you only submit subsets of variables at a time.
Specification of missing value codes are also important for effective
plotting. The commands are not ran here, as they work best when
initiated interactively.</p>
<pre><code><span><span class="co"># Functions not run here as they work best when initiated interactively</span></span>
<span><span class="co"># Awareness Report (See Appendix A for more details)</span></span>
<span><span class="fu"><a href="../reference/create_awareness_report.html">create_awareness_report</a></span><span class="op">(</span><span class="va">DD.dict</span>, <span class="va">DS.data</span>, non.NA.missing.codes<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">9999</span>, <span class="op">-</span><span class="fl">4444</span><span class="op">)</span>,</span>
<span>   output.path<span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span>   </span>
<span><span class="co"># Data Report (See Appendix B for more details)</span></span>
<span><span class="fu"><a href="../reference/create_report.html">create_report</a></span><span class="op">(</span><span class="va">DD.dict</span>, <span class="va">DS.data</span>, sex.split<span class="op">=</span><span class="cn">TRUE</span>, sex.name<span class="op">=</span> <span class="st">"SEX"</span>,</span>
<span>   start <span class="op">=</span> <span class="fl">3</span>, end <span class="op">=</span> <span class="fl">7</span>, non.NA.missing.codes<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">9999</span>,<span class="op">-</span><span class="fl">4444</span><span class="op">)</span>,</span>
<span>   output.path<span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, open.html<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre>
<p>For more details and to learn more, see the appendices below
(<code>create_awareness_report</code>, Appendix A;
<code>create_report</code>, Appendix B).</p>
</div>
<div class="section level3" number="5.3">
<h3 id="label-data-function">
<span class="header-section-number">5.3</span> Label data
function<a class="anchor" aria-label="anchor" href="#label-data-function"></a>
</h3>
<p>Note that after your data dictionary is fully consistent with your
data, you can use the <code>label_data</code> function to convert your
data to labelled data, essentially embedding the data dictionary into
the data for future use! This function uses Haven labelled data with
SPSS style missing data codes to add non-missing information from the
data dictionary as attributes to the data.</p>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">DS_labelled_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/label_data.html">label_data</a></span><span class="op">(</span><span class="va">DD.dict.A</span>, <span class="va">DS.data.A</span>, non.NA.missing.codes<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">9999</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">labelled</span><span class="fu">::</span><span class="fu"><a href="http://larmarange.github.io/labelled/reference/var_label.html" class="external-link">var_label</a></span><span class="op">(</span><span class="va">DS_labelled_data</span><span class="op">$</span><span class="va">SEX</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Sex assigned at birth"</span></span>
<span><span class="fu">labelled</span><span class="fu">::</span><span class="fu"><a href="http://larmarange.github.io/labelled/reference/val_labels.html" class="external-link">val_labels</a></span><span class="op">(</span><span class="va">DS_labelled_data</span><span class="op">$</span><span class="va">SEX</span><span class="op">)</span></span>
<span><span class="co">#&gt;   male female </span></span>
<span><span class="co">#&gt;      0      1</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">DS_labelled_data</span><span class="op">$</span><span class="va">SEX</span><span class="op">)</span></span>
<span><span class="co">#&gt; $labels</span></span>
<span><span class="co">#&gt;   male female </span></span>
<span><span class="co">#&gt;      0      1 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $label</span></span>
<span><span class="co">#&gt; [1] "Sex assigned at birth"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $class</span></span>
<span><span class="co">#&gt; [1] "haven_labelled" "vctrs_vctr"     "integer"       </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $TYPE</span></span>
<span><span class="co">#&gt; [1] "integer, encoded value"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $MIN</span></span>
<span><span class="co">#&gt; [1] 0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $MAX</span></span>
<span><span class="co">#&gt; [1] 1</span></span>
<span><span class="fu">labelled</span><span class="fu">::</span><span class="fu"><a href="http://larmarange.github.io/labelled/reference/na_values.html" class="external-link">na_values</a></span><span class="op">(</span><span class="va">DS_labelled_data</span><span class="op">$</span><span class="va">HX_DEPRESSION</span><span class="op">)</span></span>
<span><span class="co">#&gt; missing value </span></span>
<span><span class="co">#&gt;         -9999</span></span></code></pre></div>
</div>
</div>
<div class="section level2" number="6">
<h2 id="appendix-reporting-functions">
<span class="header-section-number">6</span> Appendix: Reporting
functions<a class="anchor" aria-label="anchor" href="#appendix-reporting-functions"></a>
</h2>
<p>As described above, there are a variety of awareness and reporting
functions that are not built into the complete workflow approach. The
purpose of this appendix is to highlight some of these features using
the following example data.</p>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">ExampleB</span><span class="op">)</span></span></code></pre></div>
<div class="section level3" number="6.1">
<h3 id="appendix-a-awareness-report">
<span class="header-section-number">6.1</span> Appendix A: Awareness
Report<a class="anchor" aria-label="anchor" href="#appendix-a-awareness-report"></a>
</h3>
<p>Run <code>create_awareness_report</code>, which creates a nice .Rmd
version of the below checks. While the output below is nearly identical
to that you will see using the <code>create_awareness_report</code>
function, for the purposes of this vignette, we have further expanded
the annotation to assist in interpretation of the output through an
example.</p>
<pre><code><span><span class="co"># Not run as works best when run interactively</span></span>
<span><span class="fu"><a href="../reference/create_awareness_report.html">create_awareness_report</a></span><span class="op">(</span><span class="va">DD.dict</span>, <span class="va">DS.data</span>, non.NA.missing.codes<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">9999</span><span class="op">)</span>,</span>
<span>   output.path<span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre>
<div class="section level4" number="6.1.1">
<h4 id="missingness-summary">
<span class="header-section-number">6.1.1</span> Missingness
Summary<a class="anchor" aria-label="anchor" href="#missingness-summary"></a>
</h4>
<p>This awareness function summarizes the amount of missingness in the
data set.</p>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/missingness_summary.html">missingness_summary</a></span><span class="op">(</span><span class="va">DS.data.B</span>, non.NA.missing.codes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">9999</span><span class="op">)</span>, threshold <span class="op">=</span> <span class="fl">95</span><span class="op">)</span></span></code></pre></div>
<p><img src="dbGaPCheckup_vignette_files/figure-html/misssum-1.png"><!-- --></p>
<pre><code><span><span class="co">#&gt; $Message</span></span>
<span><span class="co">#&gt; [1] "There are 0 variables with a percent missingness &gt; 95% in your data set."</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $threshold_summary</span></span>
<span><span class="co">#&gt; [1] missing             percent_missingness</span></span>
<span><span class="co">#&gt; &lt;0 rows&gt; (or 0-length row.names)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $full_missingness_summary</span></span>
<span><span class="co">#&gt;                      missing percent_missingness</span></span>
<span><span class="co">#&gt; SAMPLE_ID                 16                  16</span></span>
<span><span class="co">#&gt; SMOKING_HX                 5                   5</span></span>
<span><span class="co">#&gt; PHYSICAL_ACTIVITY          4                   4</span></span>
<span><span class="co">#&gt; WEIGHT                     3                   3</span></span>
<span><span class="co">#&gt; BMI                        3                   3</span></span>
<span><span class="co">#&gt; OBESITY                    3                   3</span></span>
<span><span class="co">#&gt; ABD_CIRC                   3                   3</span></span>
<span><span class="co">#&gt; HIP_CIRC                   3                   3</span></span>
<span><span class="co">#&gt; ABD_SKF                    3                   3</span></span>
<span><span class="co">#&gt; SUP_SKF                    3                   3</span></span>
<span><span class="co">#&gt; RESIST                     3                   3</span></span>
<span><span class="co">#&gt; REACT                      3                   3</span></span>
<span><span class="co">#&gt; HX_DM                      3                   3</span></span>
<span><span class="co">#&gt; HX_STROKE                  3                   3</span></span>
<span><span class="co">#&gt; HEIGHT                     2                   2</span></span>
<span><span class="co">#&gt; CUFFSIZE                   2                   2</span></span>
<span><span class="co">#&gt; BP_SYSTOLIC                2                   2</span></span>
<span><span class="co">#&gt; BP_DIASTOLIC               2                   2</span></span>
<span><span class="co">#&gt; HTN                        2                   2</span></span>
<span><span class="co">#&gt; HX_ANXIETY                 2                   2</span></span>
<span><span class="co">#&gt; HX_DEPRESSION              2                   2</span></span>
<span><span class="co">#&gt; SUBJECT_ID                 0                   0</span></span>
<span><span class="co">#&gt; AGE                        0                   0</span></span>
<span><span class="co">#&gt; SEX                        0                   0</span></span>
<span><span class="co">#&gt; LENGTH_SMOKING_YEARS       0                   0</span></span>
<span><span class="co">#&gt; HEART_RATE                 0                   0</span></span>
<span><span class="co">#&gt; SOCIAL_SUPPORT             0                   0</span></span>
<span><span class="co">#&gt; PERCEIVED_CONFLICT         0                   0</span></span>
<span><span class="co">#&gt; PERCEIVED_HEALTH           0                   0</span></span></code></pre>
<p>Above we that there are 0 variables in our example data set that have
a percent missingness &gt;95%. Navigating through the output, we also
see a complete summary of missingness in our data set, with
<code>SAMPLE_ID</code> having the highest % missingness at 16%. Finally
we see a histogram plotting missingness across our data set.</p>
</div>
<div class="section level4" number="6.1.2">
<h4 id="values-missing-tables">
<span class="header-section-number">6.1.2</span> Values Missing
Tables<a class="anchor" aria-label="anchor" href="#values-missing-tables"></a>
</h4>
<p>In the <code>value_missing_table</code> function, for each variable,
we have three sets of possible values:</p>
<ol style="list-style-type: decimal">
<li>the set D of all the unique values observed in the data;<br>
</li>
<li>the set V of all the values explicitly encoded in the VALUES columns
of the data dictionary; and<br>
</li>
<li>the set M of the missing value codes defined by the user via the
<code>non.NA.missing.codes</code> argument.</li>
</ol>
<p>This function examines various intersections of these three sets,
providing awareness checks about possible issues of concern.</p>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">results.list</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/value_missing_table.html">value_missing_table</a></span><span class="op">(</span><span class="va">DD.dict.B</span>, <span class="va">DS.data.B</span>, non.NA.missing.codes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">9999</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; $Message</span></span>
<span><span class="co">#&gt; [1] "Flag: at least one check flagged."</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $Information</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 7 × 4</span></span></span>
<span><span class="co">#&gt;   check.name                     check.description              check…¹ details </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;named &gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Check A: In M, Not in D        <span style="color: #949494;">"</span>All missing value codes are … Flag    &lt;tibble&gt;</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Check B: In V, Not in D        <span style="color: #949494;">"</span>All value codes are in the d… Flag    &lt;tibble&gt;</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Check C: In M, Not in V        <span style="color: #949494;">"</span>All missing value codes are … Flag    &lt;tibble&gt;</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Check D: In M &amp; in D, not in V <span style="color: #949494;">"</span>All missing value codes are … Flag    &lt;tibble&gt;</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> Check E: V NOT in M, NOT in D  <span style="color: #949494;">"</span>All value codes no defined a… Passed  &lt;chr&gt;   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> Awareness: NsetD vs. NsetV     <span style="color: #949494;">"</span>Size of Set D vs size of set… Info    &lt;tibble&gt;</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">7</span> Awareness: N_DnotM vs. N_VnotM <span style="color: #949494;">"</span>Size of Set D\\M vs size of … Info    &lt;tibble&gt;</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with abbreviated variable name ¹​check.status</span></span></span>
<span><span class="va">results</span> <span class="op">&lt;-</span> <span class="va">results.list</span><span class="op">$</span><span class="va">report</span></span></code></pre></div>
<div class="section level5" number="6.1.2.1">
<h5 id="check-a-if-the-user-defines-a-missing-value-code-that-is-not-present-in-the-data-in-set-m-and-not-in-set-d-">
<span class="header-section-number">6.1.2.1</span> Check A: If the
user defines a missing value code that is not present in the data (In
Set M and Not in Set D).<a class="anchor" aria-label="anchor" href="#check-a-if-the-user-defines-a-missing-value-code-that-is-not-present-in-the-data-in-set-m-and-not-in-set-d-"></a>
</h5>
<table class="table">
<caption>Table Check A: List of variables for which user-defined missing
value code is not present in the data.</caption>
<colgroup>
<col width="31%">
<col width="11%">
<col width="8%">
<col width="8%">
<col width="19%">
<col width="11%">
<col width="7%">
</colgroup>
<thead><tr class="header">
<th align="left">VARNAME</th>
<th align="left">AllMInD</th>
<th align="right">NsetD</th>
<th align="right">NsetM</th>
<th align="right">NsetDAndSetM</th>
<th align="left">MNotInD</th>
<th align="left">MInD</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">SEX</td>
<td align="left">FALSE</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="left">-9999</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">LENGTH_SMOKING_YEARS</td>
<td align="left">FALSE</td>
<td align="right">12</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="left">-9999</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">HEART_RATE</td>
<td align="left">FALSE</td>
<td align="right">44</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="left">-9999</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">SOCIAL_SUPPORT</td>
<td align="left">FALSE</td>
<td align="right">5</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="left">-9999</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">PERCEIVED_CONFLICT</td>
<td align="left">FALSE</td>
<td align="right">24</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="left">-9999</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">PERCEIVED_HEALTH</td>
<td align="left">FALSE</td>
<td align="right">10</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="left">-9999</td>
<td align="left"></td>
</tr>
</tbody>
</table>
<p>The above table lists the variables for which the user-defined
missing value code of <code>-9999</code> is not present in the data.
These are not necessarily errors, however, as <code>dbGaPCheckup</code>
reads <code>non.NA.missing.codes</code> as “global” missing value codes,
even if a specific variable does not contain the code. For example, in
the example data set, the SEX variable is complete, containing no
missing value codes and only containing encoded values of 0=male, and
1=female, but <code>SEX</code> is flagged in the above variable list
since it does not contain a <code>-9999</code> value. In other words,
this variable’s presence in the above list is NOT an issue that we
should be concerned about. This function is intended only to bring
awareness to potential errors in your data (e.g., perhaps you knew that
the sex variable was missing for 5 participants for your specific
study.)</p>
<p>Interpretation of table column names:<br>
–&gt; <code>AllMInD</code>: Variable-specific check result communicating
if user-defined missing value code(s) are detected in the data set
(FALSE=no).<br>
–&gt; <code>NsetD</code>: Number of values (or levels) detected in the
data (e.g., in this example, <code>SEX</code> has two levels [0=male,
1=female]).<br>
–&gt; <code>NsetM</code>: Number of missing value codes defined (e.g.,
in this example, 1 user-defined missing value code [<code>-9999</code>]
was defined).<br>
–&gt; <code>NsetDAndSetM</code>: Number of occurrences detected in both
the data set and the user-defined missing value code (e.g., here 0
overlap for these variables, but if a second missing value code were
defined, we might see a 1 here).<br>
–&gt; <code>MNotInD</code>: User-defined missing value code the function
checked for (e.g., in this example, <code>-9999</code>).<br>
–&gt; <code>MInD</code>: Variable-specific number; user-defined missing
value codes detected in the data (e.g., in this example, 0).</p>
</div>
<div class="section level5" number="6.1.2.2">
<h5 id="check-b-if-a-values-entry-defines-an-encoded-code-value-but-that-value-is-not-present-in-the-data-in-set-v-and-not-in-set-d-">
<span class="header-section-number">6.1.2.2</span> Check B: If a
VALUES entry defines an encoded code value, but that value is not
present in the data (In Set V and Not in Set D).<a class="anchor" aria-label="anchor" href="#check-b-if-a-values-entry-defines-an-encoded-code-value-but-that-value-is-not-present-in-the-data-in-set-v-and-not-in-set-d-"></a>
</h5>
<table class="table">
<caption>Table Check B: List of variables for which a VALUES entry
defines an encoded code value, but that value is not present in the
data.</caption>
<thead><tr class="header">
<th align="left">VARNAME</th>
<th align="left">AllVsInD</th>
<th align="right">NsetD</th>
<th align="right">NsetV</th>
<th align="right">NsetDAndSetV</th>
<th align="left">VsNotInD</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">LENGTH_SMOKING_YEARS</td>
<td align="left">FALSE</td>
<td align="right">12</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="left">-9999</td>
</tr>
<tr class="even">
<td align="left">HEART_RATE</td>
<td align="left">FALSE</td>
<td align="right">44</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="left">-9999</td>
</tr>
</tbody>
</table>
<p>The above table lists variables for which a VALUES entry defines an
encoded value (i.e., value=meaning; e.g., 0=male), but that value is not
present in the data. While ideally all defined encoded values (i.e., in
set V) should be observed in the data (i.e., in set D), it is NOT
necessarily an error if one does not.</p>
<p>Interpretation of table column names:<br>
–&gt; <code>AllVsInD</code>: Check result communicating if all parsed
VALUES entries were detected in the data set (FALSE=no).<br>
–&gt; <code>NsetD</code>: Number of values (or levels) detected in the
data (e.g., in this example, <code>LENGTH_SMOKING_YEARS</code> has 12
unique levels).<br>
–&gt; <code>NsetV</code>: Number of encoded value codes detected (e.g.,
for this example, <code>LENGTH_SMOKING_YEARS</code> has two encoded
values).<br>
–&gt; <code>NsetDAndSetV</code>: Number of occurrences detected in both
the data set and the VALUES entries (e.g., for this example,
<code>LENGTH_SMOKING_YEARS</code> has one of the two encoded values
detected in the data).<br>
–&gt; <code>VsNotInD</code>: Encoded value not detected in the data
(e.g., for this example, -9999 was not detected in either variable).</p>
<p>So this awareness check alerts us to two potential errors.
Specifically, -9999 is defined as a missing value code for
<code>LENGTH_SMOKING_YEARS</code> and <code>HEART_RATE</code>, but this
code is not detected in the data itself.</p>
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Smoking </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">DS.data.B</span><span class="op">$</span><span class="va">LENGTH_SMOKING_YEARS</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; -4444   0.5   1.5     5    10    14    15    25    44    45    50    52 </span></span>
<span><span class="co">#&gt;    84     1     1     1     1     1     3     2     2     1     2     1</span></span>
<span><span class="fu"><a href="../reference/dictionary_search.html">dictionary_search</a></span><span class="op">(</span><span class="va">DD.dict.B</span>, search.term<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"LENGTH_SMOKING_YEARS"</span><span class="op">)</span>, search.column<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"VARNAME"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 21</span></span></span>
<span><span class="co">#&gt;   VARNAME        VARDESC DOCFILE TYPE  UNITS   MIN   MAX RESOL…¹ COMME…² COMME…³</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> LENGTH_SMOKIN… How ma… <span style="color: #BB0000;">NA</span>      deci… years    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span> <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 11 more variables: VARIABLE_SOURCE &lt;lgl&gt;, SOURCE_VARIABLE_ID &lt;lgl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   VARIABLE_MAPPING &lt;lgl&gt;, UNIQUEKEY &lt;lgl&gt;, COLLINTERVAL &lt;lgl&gt;, ORDER &lt;lgl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   VALUES &lt;chr&gt;, ...18 &lt;chr&gt;, ...19 &lt;chr&gt;, ...20 &lt;chr&gt;, ...21 &lt;chr&gt;, and</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   abbreviated variable names ¹​RESOLUTION, ²​COMMENT1, ³​COMMENT2</span></span></span>
<span></span>
<span><span class="co"># Heart rate </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">DS.data.B</span><span class="op">$</span><span class="va">HEART_RATE</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  38  45  46  47  48  49  50  52  54  55  56  57  58  59  60  64  65  67  68  72 </span></span>
<span><span class="co">#&gt;   1   5   1   1   2   1   1   2   2   1   3   1   5   1   1   1   8   1   2   2 </span></span>
<span><span class="co">#&gt;  73  74  75  76  78  79  82  83  85  86  90  91  95  96  98 100 105 107 110 113 </span></span>
<span><span class="co">#&gt;   1   1   9   3   1   1   1   1   9   2   2   1  13   1   1   1   1   1   3   1 </span></span>
<span><span class="co">#&gt; 114 115 125 135 </span></span>
<span><span class="co">#&gt;   1   1   1   1</span></span>
<span><span class="fu"><a href="../reference/dictionary_search.html">dictionary_search</a></span><span class="op">(</span><span class="va">DD.dict.B</span>, search.term<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"HEART_RATE"</span><span class="op">)</span>, search.column<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"VARNAME"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 21</span></span></span>
<span><span class="co">#&gt;   VARNAME    VARDESC     DOCFILE TYPE  UNITS   MIN   MAX RESOL…¹ COMME…² COMME…³</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> HEART_RATE Heart rate… <span style="color: #BB0000;">NA</span>      inte… beat…    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span> <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 11 more variables: VARIABLE_SOURCE &lt;lgl&gt;, SOURCE_VARIABLE_ID &lt;lgl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   VARIABLE_MAPPING &lt;lgl&gt;, UNIQUEKEY &lt;lgl&gt;, COLLINTERVAL &lt;lgl&gt;, ORDER &lt;lgl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   VALUES &lt;chr&gt;, ...18 &lt;chr&gt;, ...19 &lt;chr&gt;, ...20 &lt;chr&gt;, ...21 &lt;chr&gt;, and</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   abbreviated variable names ¹​RESOLUTION, ²​COMMENT1, ³​COMMENT2</span></span></span></code></pre></div>
<p>Looking at this more closely, we see a missing value code of -4444,
not -9999, is being used for <code>LENGTH_SMOKING_YEARS</code>, and
<code>HEART_RATE</code> is a complete variable with no missing data.
-9999 could be removed as a <code>VALUES</code> entry for those
variables and -4444 should added as a
<code>non.NA.missing.value.code</code> for this function and example
data set.</p>
</div>
<div class="section level5" number="6.1.2.3">
<h5 id="check-c-if-the-user-defines-a-missing-value-code-that-is-not-defined-in-a-values-entry-in-set-m-and-not-in-set-v-">
<span class="header-section-number">6.1.2.3</span> Check C: If the
user defines a missing value code that is not defined in a VALUES entry
(In Set M and Not in Set V).<a class="anchor" aria-label="anchor" href="#check-c-if-the-user-defines-a-missing-value-code-that-is-not-defined-in-a-values-entry-in-set-m-and-not-in-set-v-"></a>
</h5>
<table style="width:100%;" class="table">
<caption>Table Check C: List of variables for which user-defined missing
value code(s) are not defined in a VALUES entry.</caption>
<colgroup>
<col width="26%">
<col width="19%">
<col width="8%">
<col width="8%">
<col width="17%">
<col width="20%">
</colgroup>
<thead><tr class="header">
<th align="left">VARNAME</th>
<th align="left">AllSetMInSetV</th>
<th align="right">NsetV</th>
<th align="right">NsetM</th>
<th align="right">NsetMAndSetV</th>
<th align="left">SetMsNotInSetV</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">SEX</td>
<td align="left">FALSE</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="left">-9999</td>
</tr>
<tr class="even">
<td align="left">CUFFSIZE</td>
<td align="left">FALSE</td>
<td align="right">4</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="left">-9999</td>
</tr>
<tr class="odd">
<td align="left">SOCIAL_SUPPORT</td>
<td align="left">FALSE</td>
<td align="right">5</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="left">-9999</td>
</tr>
<tr class="even">
<td align="left">PERCEIVED_CONFLICT</td>
<td align="left">FALSE</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="left">-9999</td>
</tr>
<tr class="odd">
<td align="left">PERCEIVED_HEALTH</td>
<td align="left">FALSE</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="left">-9999</td>
</tr>
</tbody>
</table>
<p>Interpretation of table column names:<br>
–&gt; <code>AllSetMInSetV</code>: Variable-specific check result
communicating if user-defined missing value code(s) are detected as a
VALUES entry (FALSE=no).<br>
–&gt; <code>NsetV</code>: Number of encoded value codes detected (e.g.,
in this example, <code>SEX</code> has two levels [0=male,
1=female]).<br>
–&gt; <code>NsetM</code>: Number of missing value codes defined (e.g.,
in this example, 1 user-defined missing value code [<code>-9999</code>]
was defined).<br>
–&gt; <code>NsetMAndSetD</code>: Number of occurrences detected in both
the user-defined missing value code and data set.<br>
–&gt; <code>SetMsNotInSetV</code>: Missing value code defined that was
not detected in the VALUES entries (e.g., here -9999).</p>
</div>
<div class="section level5" number="6.1.2.4">
<h5 id="check-d-if-a-user-defined-missing-value-code-is-present-in-the-data-for-a-given-variable-but-that-variable-does-not-have-a-corresponding-values-entry-m-in-set-d-and-not-in-set-v-">
<span class="header-section-number">6.1.2.4</span> Check D: If a
user-defined missing value code is present in the data for a given
variable, but that variable does not have a corresponding VALUES entry
(M in Set D and Not in Set V).<a class="anchor" aria-label="anchor" href="#check-d-if-a-user-defined-missing-value-code-is-present-in-the-data-for-a-given-variable-but-that-variable-does-not-have-a-corresponding-values-entry-m-in-set-d-and-not-in-set-v-"></a>
</h5>
<table class="table">
<caption>Table Check D: List of variables for which a user-defined
missing value code is present in the data for a given variable, but that
variable does not have a corresponding VALUES entry.</caption>
<thead><tr class="header">
<th align="left">VARNAME</th>
<th align="left">All_MInSetD_InSetV</th>
<th align="left">setMInDNotInV</th>
</tr></thead>
<tbody><tr class="odd">
<td align="left">CUFFSIZE</td>
<td align="left">FALSE</td>
<td align="left">-9999</td>
</tr></tbody>
</table>
<p>Interpretation of table column names:<br>
–&gt; <code>All_MInSetD_InSetV</code>: Variable-specific check result
communicating if user-defined missing value code(s) are detected in the
data for a given variable, but that variable does not have a
corresponding VALUES entry (FALSE=no).<br>
–&gt; <code>setMInDNotInV</code>: Encoded value codes detected in the
data but not in a corresponding VALUES entry.</p>
<p>Note that this check identified a true error! Specifically
<code>CUFFSIZE</code> has a missing value code in the data, -9999, that
has not been defined as an encoded value in the <code>VALUES</code>
columns. (Funny enough, this was NOT intentional on our part when
creating this synthetic data set! Thank you dbGaPCheckup!)</p>
</div>
<div class="section level5" number="6.1.2.5">
<h5 id="check-e-if-a-values-entry-is-not-defined-as-a-missing-value-code-and-is-not-identified-in-the-data--set-v-values-that-are-not-in-set-m-that-are-not-in-set-d-">
<span class="header-section-number">6.1.2.5</span> Check E: If a
VALUES entry is NOT defined as a missing value code AND is NOT
identified in the data. ((Set V values that are NOT in Set M) that are
NOT in Set D).<a class="anchor" aria-label="anchor" href="#check-e-if-a-values-entry-is-not-defined-as-a-missing-value-code-and-is-not-identified-in-the-data--set-v-values-that-are-not-in-set-m-that-are-not-in-set-d-"></a>
</h5>
<table class="table">
<caption>Table Check E: List of variables for which a VALUES entry is
NOT defined as a missing value code AND is NOT identified in the
data</caption>
<thead><tr class="header">
<th align="left">x</th>
</tr></thead>
<tbody><tr class="odd">
<td align="left">Passed</td>
</tr></tbody>
</table>
<p>In our example here, all VALUES entries that are NOT defined as
missing values codes are listed in the data - so our check passes.</p>
<p>However, if there were issues, interpretation of table column names
would be as follows:<br>
–&gt; <code>All_VNotInM_NotInD</code>: Variable-specific check result
communicating if encoded values that are NOT defined as a missing value
code are detected in the data (FALSE=no).<br>
–&gt; <code>setVNotInM_NotInD</code>: Encoded value codes detected as a
VALUES entry but NOT listed as a missing value code and NOT detected in
the data.</p>
</div>
</div>
</div>
<div class="section level3" number="6.2">
<h3 id="appendix-b-data-report">
<span class="header-section-number">6.2</span> Appendix B: Data
Report<a class="anchor" aria-label="anchor" href="#appendix-b-data-report"></a>
</h3>
<p>Next we can run <code>create_report</code>, which generates a textual
and graphical report of the selected variables in HTML format which will
optionally open the report in a web browser. This awareness report is
designed to help you catch other potential errors in your data set. Note
that the report generated is quite long however, so we recommend that
you only submit subsets of variables at a time. In the example below,
for speed of rendering, we create the report for variables only in
columns 3 through 6. Note that there is an option to plot/report the
data split by sex if desired. Specification of missing value codes are
also important for effective plotting.</p>
<p>Again, the code below generates a nearly identical output to the
<code>create_report</code> function, with some additional annotation
added here for the purposes of this vignette and ease of
interpretation.</p>
<pre><code><span><span class="co"># Not run as works best when run interactively</span></span>
<span><span class="fu"><a href="../reference/create_report.html">create_report</a></span><span class="op">(</span><span class="va">DD.dict</span>, <span class="va">DS.data</span>, sex.split<span class="op">=</span><span class="cn">TRUE</span>, sex.name<span class="op">=</span> <span class="st">"SEX"</span>,</span>
<span>   start <span class="op">=</span> <span class="fl">3</span>, end <span class="op">=</span> <span class="fl">6</span>, non.NA.missing.codes<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">9999</span>,<span class="op">-</span><span class="fl">4444</span><span class="op">)</span>,</span>
<span>   output.path<span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, open.html<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre>
<div class="section level4" number="6.2.1">
<h4 id="summary-and-plots">
<span class="header-section-number">6.2.1</span> Summary and
plots<a class="anchor" aria-label="anchor" href="#summary-and-plots"></a>
</h4>
<pre><code><span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'dplyr'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     filter, lag</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span></code></pre>
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/dat_function_selected.html">dat_function_selected</a></span><span class="op">(</span><span class="va">DS.data.B</span>, <span class="va">DD.dict.B</span>, sex.split <span class="op">=</span> <span class="cn">TRUE</span>, sex.name <span class="op">=</span> <span class="st">"SEX"</span>, start <span class="op">=</span> <span class="fl">3</span>, end <span class="op">=</span> <span class="fl">6</span>, dataset.na<span class="op">=</span><span class="va">dataset.na</span>, h.level<span class="op">=</span><span class="fl">4</span><span class="op">)</span></span></code></pre></div>
<div class="section level5" number="6.2.1.1">
<h5 id="age---integer">
<span class="header-section-number">6.2.1.1</span> AGE -
integer<a class="anchor" aria-label="anchor" href="#age---integer"></a>
</h5>
<p>Check passed: AGE is integer TYPE and all integers <img src="dbGaPCheckup_vignette_files/figure-html/applyfun-1.png"><!-- --><img src="dbGaPCheckup_vignette_files/figure-html/applyfun-2.png"><!-- --><img src="dbGaPCheckup_vignette_files/figure-html/applyfun-3.png"><!-- --><img src="dbGaPCheckup_vignette_files/figure-html/applyfun-4.png"><!-- --></p>
<ul>
<li><p>AGE has no missing values.</p></li>
<li><p>AGE has no missing values after mapping missing codes to
NA.</p></li>
</ul>
</div>
<div class="section level5" number="6.2.1.2">
<h5 id="sex---integer-encoded-value">
<span class="header-section-number">6.2.1.2</span> SEX - integer,
encoded value<a class="anchor" aria-label="anchor" href="#sex---integer-encoded-value"></a>
</h5>
<p>Check passed: SEX is integer TYPE and all integers <img src="dbGaPCheckup_vignette_files/figure-html/applyfun-5.png"><!-- --></p>
<ul>
<li><p>SEX has no missing values.</p></li>
<li><p>SEX has no missing values after mapping missing codes to
NA.</p></li>
</ul>
</div>
<div class="section level5" number="6.2.1.3">
<h5 id="height---decimal-encoded-value">
<span class="header-section-number">6.2.1.3</span> HEIGHT - decimal,
encoded value<a class="anchor" aria-label="anchor" href="#height---decimal-encoded-value"></a>
</h5>
<p><img src="dbGaPCheckup_vignette_files/figure-html/applyfun-6.png"><!-- --><img src="dbGaPCheckup_vignette_files/figure-html/applyfun-7.png"><!-- --><img src="dbGaPCheckup_vignette_files/figure-html/applyfun-8.png"><!-- --><img src="dbGaPCheckup_vignette_files/figure-html/applyfun-9.png"><!-- --><img src="dbGaPCheckup_vignette_files/figure-html/applyfun-10.png"><!-- --><img src="dbGaPCheckup_vignette_files/figure-html/applyfun-11.png"><!-- --></p>
<ul>
<li><p>HEIGHT has no missing values.</p></li>
<li><p>There are 53 missing values for HEIGHT after mapping missing
codes to NA.</p></li>
</ul>
</div>
<div class="section level5" number="6.2.1.4">
<h5 id="weight---decimal-encoded-value">
<span class="header-section-number">6.2.1.4</span> WEIGHT - decimal,
encoded value<a class="anchor" aria-label="anchor" href="#weight---decimal-encoded-value"></a>
</h5>
<p><img src="dbGaPCheckup_vignette_files/figure-html/applyfun-12.png"><!-- --><img src="dbGaPCheckup_vignette_files/figure-html/applyfun-13.png"><!-- --><img src="dbGaPCheckup_vignette_files/figure-html/applyfun-14.png"><!-- --><img src="dbGaPCheckup_vignette_files/figure-html/applyfun-15.png"><!-- --><img src="dbGaPCheckup_vignette_files/figure-html/applyfun-16.png"><!-- --><img src="dbGaPCheckup_vignette_files/figure-html/applyfun-17.png"><!-- --></p>
<ul>
<li><p>WEIGHT has no missing values.</p></li>
<li><p>There are 2 missing values for WEIGHT after mapping missing codes
to NA.</p></li>
</ul>
<p>Above we see a full report for variables <code>AGE</code>,
<code>SEX</code>, <code>HEIGHT</code>, and <code>WEIGHT</code> as well
as <code>AGE</code>, <code>HEIGHT</code>, and <code>WEIGHT</code> split
by sex. Given the complexity of many data sets, this report was created
so that investigators could more easily manually review the data for
potential errors (e.g., sex=male appearing in a data of pregnant
participants who were all female assigned at birth).</p>
</div>
</div>
</div>
</div>
<div class="section level2" number="7">
<h2 id="contact-information">
<span class="header-section-number">7</span> Contact
information<a class="anchor" aria-label="anchor" href="#contact-information"></a>
</h2>
<p>If you have any questions or comments, please feel free to contact
us!</p>
<p>Lacey W. Heinsberg: <a href="mailto:law145@pitt.edu" class="email">law145@pitt.edu</a><br>
Daniel E. Weeks: <a href="mailto:weeks@pitt.edu" class="email">weeks@pitt.edu</a></p>
<p>Bug reports: <a href="https://github.com/lwheinsberg/dbGaPCheckup/issues" class="external-link uri">https://github.com/lwheinsberg/dbGaPCheckup/issues</a></p>
</div>
<div class="section level2" number="8">
<h2 id="acknowledgments">
<span class="header-section-number">8</span> Acknowledgments<a class="anchor" aria-label="anchor" href="#acknowledgments"></a>
</h2>
<p>This package was developed with partial support from the National
Institutes of Health under award numbers R01HL093093, R01HL133040, and
K99HD107030. The <code>eval_function</code> and
<code>dat_function</code> functions that form the backbone of the
awareness reports were inspired by an elegant 2016 homework answer
submitted by Tanbin Rahman in our HUGEN 2070 course ‘Bioinformatics for
Human Genetics’. We would also like to thank Nick Moshgat for testing
and providing feedback on our package during development.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Lacey W. Heinsberg, Daniel E. Weeks.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
