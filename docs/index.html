<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Contains functions that check for formatting of the Subject Phenotype data set and data dictionary as specified by the National Center for Biotechnology Information (NCBI) Database of Genotypes and Phenotypes (dbGaP) &lt;https://www.ncbi.nlm.nih.gov/gap/docs/submissionguide/&gt;. ">
<title>dbGaP Checkup • dbGaPCheckup</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="dbGaP Checkup">
<meta property="og:description" content="Contains functions that check for formatting of the Subject Phenotype data set and data dictionary as specified by the National Center for Biotechnology Information (NCBI) Database of Genotypes and Phenotypes (dbGaP) &lt;https://www.ncbi.nlm.nih.gov/gap/docs/submissionguide/&gt;. ">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">dbGaPCheckup</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="articles/dbGaPCheckup.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="articles/dbGaPCheckup_vignette.html">dbGaPCheckup Vignette</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/lwheinsberg/dbGaPCheckup/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="dbgapcheckup">dbGaPCheckup<a class="anchor" aria-label="anchor" href="#dbgapcheckup"></a>
</h1></div>
<!-- README.md is generated from README.Rmd. Please edit that file -->
</div>
<div class="section level1">
<h1 id="id_1-overview">1 Overview<a class="anchor" aria-label="anchor" href="#id_1-overview"></a>
</h1>
<!-- badges: start -->
<!-- badges: end -->
<p><em>I want to make the data sing, but it is torturing me instead. Will the real data please stand up?</em></p>
<p>The goal of <code>dbGaPCheckup</code> is to make your National Library of Medicine database of Genotypes and Phenotypes (<a href="https://www.ncbi.nlm.nih.gov/gap/" class="external-link">dbGaP</a>) data set submission a tiny bit easier. Specifically, our package implements several check, awareness, utility, and reporting functions designed to help you ensure that your Subject Phenotype data set and data dictionary meet a variety of dbGaP specific <a href="https://www.ncbi.nlm.nih.gov/gap/docs/submissionguide/" class="external-link">formatting requirements</a>. A list of the functions available can be found below.</p>
<p>A self-archived version of the submitted (i.e., pre-peer reviewed) manuscript (<code>dbGaPCheckup_Manuscript_Pre-Review.docx</code>) has been added to this GitHub repository for accessibility.</p>
<table class="table">
<colgroup>
<col width="6%">
<col width="6%">
<col width="87%">
</colgroup>
<thead><tr class="header">
<th align="left">Function_Name</th>
<th align="left">Function_Type</th>
<th align="left">Function_Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">field_check</td>
<td align="left">check</td>
<td align="left">Checks for dbGaP required fields: variable name (VARNAME), variable description (VARDESC), units (UNITS), and variable value and meaning (VALUES).</td>
</tr>
<tr class="even">
<td align="left">pkg_field_check</td>
<td align="left">check</td>
<td align="left">Checks for package-level required fields: variable type (TYPE), minimum value (MIN), and maximum value (MAX).</td>
</tr>
<tr class="odd">
<td align="left">dimension_check</td>
<td align="left">check</td>
<td align="left">Checks that the number of variables match between the data set and data dictionary.</td>
</tr>
<tr class="even">
<td align="left">name_check</td>
<td align="left">check</td>
<td align="left">Checks that variable names match between the data set and data dictionary.</td>
</tr>
<tr class="odd">
<td align="left">id_check</td>
<td align="left">check</td>
<td align="left">Checks that the first column of the data set is the primary ID for each participant labeled as SUBJECT_ID and that the values contain no spaces, padded zeros, or other illegal characters.</td>
</tr>
<tr class="even">
<td align="left">row_check</td>
<td align="left">check</td>
<td align="left">Checks for empty or duplicate rows in the data set.</td>
</tr>
<tr class="odd">
<td align="left">NA_check</td>
<td align="left">check</td>
<td align="left">Checks for NA values in the data set and, if NA values are present, also checks for an encoded NA value=meaning description.</td>
</tr>
<tr class="even">
<td align="left">type_check</td>
<td align="left">check</td>
<td align="left">If a TYPE field exists, this function checks for any TYPE entries that aren’t allowable per dbGaP instructions.</td>
</tr>
<tr class="odd">
<td align="left">values_check</td>
<td align="left">check</td>
<td align="left">Checks for potential errors in the VALUES columns by ensuring (1) required format of <code>VALUE=MEANING</code> (e.g., 0=No or 1=Yes); (2) no leading/trailing spaces near the equals sign (e.g., 0=No vs. 0 = No); (3) all variables of TYPE encoded have VALUES entries; and (4) all variables with VALUES entries are listed as TYPE encoded.</td>
</tr>
<tr class="even">
<td align="left">integer_check</td>
<td align="left">check</td>
<td align="left">Checks for variables that appear to be incorrectly listed as TYPE integer.</td>
</tr>
<tr class="odd">
<td align="left">decimal_check</td>
<td align="left">check</td>
<td align="left">Checks for variables that appear to be incorrectly listed as TYPE decimal.</td>
</tr>
<tr class="even">
<td align="left">misc_format_check</td>
<td align="left">check</td>
<td align="left">Checks miscellaneous dbGaP formatting requirements to ensure (1) no duplicate variable names; (2) variable names do not contain “dbgap”; (3) there are no duplicate column names in the dictionary; and (4) column names falling after VALUES column are unnamed.</td>
</tr>
<tr class="odd">
<td align="left">description_check</td>
<td align="left">check</td>
<td align="left">Checks for unique and non-missing descriptions (VARDESC) for every variable in the data dictionary.</td>
</tr>
<tr class="even">
<td align="left">minmax_check</td>
<td align="left">check</td>
<td align="left">Checks for variables that have values exceeding the listed MIN or MAX.</td>
</tr>
<tr class="odd">
<td align="left">missing_value_check</td>
<td align="left">check</td>
<td align="left">Checks for variables that have non-encoded missing value codes.</td>
</tr>
<tr class="even">
<td align="left">complete_check</td>
<td align="left">bulk check</td>
<td align="left">Runs the entire workflow (field_check, pkg_field_check, dimension_check, name_check, id_check, row_check, NA_check, type_check, values_check, integer_check, decimal_check, misc_format_check, description_check, minmax_check, and missing_value_check).</td>
</tr>
<tr class="odd">
<td align="left">add_missing_fields</td>
<td align="left">utility</td>
<td align="left">Adds additional fields required by this package including variable type (‘TYPE’), minimum value (‘MIN’), and maximum value (‘MAX’).</td>
</tr>
<tr class="even">
<td align="left">name_correct</td>
<td align="left">utility</td>
<td align="left">Updates the data dictionary so variable names match those listed in the data set.</td>
</tr>
<tr class="odd">
<td align="left">reorder_dictionary</td>
<td align="left">utility</td>
<td align="left">Reorders the data dictionary to match the data set.</td>
</tr>
<tr class="even">
<td align="left">reorder_data</td>
<td align="left">utility</td>
<td align="left">Reorders the data set to match the data dictionary.</td>
</tr>
<tr class="odd">
<td align="left">id_first_data</td>
<td align="left">utility</td>
<td align="left">Reorders the data set so that SUBJECT_ID comes first.</td>
</tr>
<tr class="even">
<td align="left">id_first_dict</td>
<td align="left">utility</td>
<td align="left">Reorders the data dictionary so that SUBJECT_ID comes first.</td>
</tr>
<tr class="odd">
<td align="left">label_data</td>
<td align="left">utility, awareness</td>
<td align="left">Adds non-missing information from the data dictionary as attributes to the data.</td>
</tr>
<tr class="even">
<td align="left">value_meaning_table</td>
<td align="left">utility, awareness</td>
<td align="left">Generates a value-meaning table by parsing the VALUES fields.</td>
</tr>
<tr class="odd">
<td align="left">missingness_summary</td>
<td align="left">awareness</td>
<td align="left">Summarizes the amount of missingness in the data set.</td>
</tr>
<tr class="even">
<td align="left">value_missing_table</td>
<td align="left">awareness</td>
<td align="left">Checks for consistent usage of encoded values and missing value codes between the data dictionary and the data set.</td>
</tr>
<tr class="odd">
<td align="left">dictionary_search</td>
<td align="left">awareness</td>
<td align="left">Facilitates searches of the data dictionary.</td>
</tr>
<tr class="even">
<td align="left">check_report</td>
<td align="left">bulk check, reporting</td>
<td align="left">Generates a user-readable report of the checks run by the complete_check function.</td>
</tr>
<tr class="odd">
<td align="left">create_report</td>
<td align="left">reporting, awareness</td>
<td align="left">Generates a textual and graphical report of the selected variables in HTML format.</td>
</tr>
<tr class="even">
<td align="left">create_awareness_report</td>
<td align="left">reporting, awareness</td>
<td align="left">Generates an awareness report, calling missingness_summary and value_missing_table functions.</td>
</tr>
</tbody>
</table>
<p>List of function names and types.</p>
</div>
<div class="section level1">
<h1 id="id_2-copyright-information">2 Copyright information<a class="anchor" aria-label="anchor" href="#id_2-copyright-information"></a>
</h1>
<p>Copyright 2022, University of Pittsburgh. All Rights Reserved. License: <a href="https://www.gnu.org/licenses/old-licenses/gpl-2.0.en.html" class="external-link">GPL-2</a></p>
</div>
<div class="section level1">
<h1 id="id_3-installation">3 Installation<a class="anchor" aria-label="anchor" href="#id_3-installation"></a>
</h1>
<p>You can install dbGaPCheckup from <a href="https://cran.r-project.org/" class="external-link">CRAN</a> using:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"dbGaPCheckup"</span>)</span></code></pre></div>
<p>You can install the development version of dbGaPCheckup from <a href="https://github.com/" class="external-link">GitHub</a> using:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"lwheinsberg/dbGaPCheckup"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level1">
<h1 id="id_4-example">4 Example<a class="anchor" aria-label="anchor" href="#id_4-example"></a>
</h1>
<p>An introductory example is provided below. For more details see <a href="https://lwheinsberg.github.io/dbGaPCheckup/" class="uri">https://lwheinsberg.github.io/dbGaPCheckup/</a> or the <code>dbGaPCheckup_vignette</code> (expanded instructions) or <code>dbGaPCheckup</code> (Quick Start) vignette documents.</p>
<p>A special note: As you will see below, this package requires several fields beyond those required by the dbGaP <a href="https://www.ncbi.nlm.nih.gov/gap/docs/submissionguide/" class="external-link">formatting requirements</a>. Specifically, while dbGaP requires that only the <code>VARNAME</code>, <code>VARDESC</code>, <code>UNITS</code>, and <code>VALUES</code> columns be present in the data dictionary, this package requires that <code>MIN</code>, <code>MAX</code>, and <code>TYPE</code> fields are also included. If your data dictionary does not include these fields already, you can use the <code>add_missing_fields</code> function to auto fill them (see below).</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://lwheinsberg.github.io/dbGaPCheckup/">dbGaPCheckup</a></span><span class="op">)</span></span></code></pre></div>
<p>Read in your Subject Phenotype data into <code>DS.data</code>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">DS.path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"DS_Example.txt"</span>,</span>
<span>   package <span class="op">=</span> <span class="st">"dbGaPCheckup"</span>, mustWork<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">DS.data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.table</a></span><span class="op">(</span><span class="va">DS.path</span>, header<span class="op">=</span><span class="cn">TRUE</span>, sep<span class="op">=</span><span class="st">"\t"</span>, quote<span class="op">=</span><span class="st">""</span>, as.is <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>Read in your Subject Phenotype data dictionary into <code>DD.dict</code>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">DD.path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"3b_SSM_DD_Example2f.xlsx"</span>,</span>
<span>   package <span class="op">=</span> <span class="st">"dbGaPCheckup"</span>, mustWork<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">DD.dict</span> <span class="op">&lt;-</span> <span class="fu">readxl</span><span class="fu">::</span><span class="fu"><a href="https://readxl.tidyverse.org/reference/read_excel.html" class="external-link">read_xlsx</a></span><span class="op">(</span><span class="va">DD.path</span><span class="op">)</span></span>
<span><span class="co">#&gt; New names:</span></span>
<span><span class="co">#&gt; • `` -&gt; `...15`</span></span>
<span><span class="co">#&gt; • `` -&gt; `...16`</span></span>
<span><span class="co">#&gt; • `` -&gt; `...17`</span></span>
<span><span class="co">#&gt; • `` -&gt; `...18`</span></span>
<span><span class="co">#&gt; • `` -&gt; `...19`</span></span></code></pre></div>
<p>Run the function <code>check_report</code>. Note that, for many functions, specification of missing value codes are important for accurate results.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">report</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/check_report.html">check_report</a></span><span class="op">(</span>DD.dict <span class="op">=</span> <span class="va">DD.dict</span>, DS.data <span class="op">=</span> <span class="va">DS.data</span>, non.NA.missing.codes<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">4444</span>, <span class="op">-</span><span class="fl">9999</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 15 × 3</span></span>
<span><span class="co">#&gt;    Function            Status        Message                                    </span></span>
<span><span class="co">#&gt;    &lt;chr&gt;               &lt;chr&gt;         &lt;chr&gt;                                      </span></span>
<span><span class="co">#&gt;  1 field_check         Passed        Passed: required fields VARNAME, VARDESC, …</span></span>
<span><span class="co">#&gt;  2 pkg_field_check     Failed        ERROR: not all package-level required fiel…</span></span>
<span><span class="co">#&gt;  3 dimension_check     Passed        Passed: the variable count matches between…</span></span>
<span><span class="co">#&gt;  4 name_check          Passed        Passed: the variable names match between t…</span></span>
<span><span class="co">#&gt;  5 id_check            Passed        Passed: All ID variable checks passed.     </span></span>
<span><span class="co">#&gt;  6 row_check           Passed        Passed: no blank or duplicate rows detecte…</span></span>
<span><span class="co">#&gt;  7 NA_check            Not attempted ERROR: Required pre-check pkg_field_check …</span></span>
<span><span class="co">#&gt;  8 type_check          Failed        ERROR: TYPE column not found. Consider usi…</span></span>
<span><span class="co">#&gt;  9 values_check        Not attempted ERROR: Required pre-check type_check faile…</span></span>
<span><span class="co">#&gt; 10 integer_check       Not attempted ERROR: Required pre-check pkg_field_check …</span></span>
<span><span class="co">#&gt; 11 decimal_check       Not attempted ERROR: Required pre-check pkg_field_check …</span></span>
<span><span class="co">#&gt; 12 misc_format_check   Passed        Passed: no check-specific formatting issue…</span></span>
<span><span class="co">#&gt; 13 description_check   Failed        ERROR: missing and duplicate descriptions …</span></span>
<span><span class="co">#&gt; 14 minmax_check        Not attempted ERROR: Required pre-check pkg_field_check …</span></span>
<span><span class="co">#&gt; 15 missing_value_check Not attempted ERROR: Required pre-check pkg_field_check …</span></span>
<span><span class="co">#&gt; --------------------</span></span>
<span><span class="co">#&gt; pkg_field_check: Failed </span></span>
<span><span class="co">#&gt; ERROR: not all package-level required fields are present in the data dictionary. Consider using the add_missing_fields function to auto fill these fields. </span></span>
<span><span class="co">#&gt; $pkg_field_check.Info</span></span>
<span><span class="co">#&gt;  TYPE   MIN   MAX </span></span>
<span><span class="co">#&gt; FALSE FALSE FALSE </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; --------------------</span></span>
<span><span class="co">#&gt; type_check: Failed </span></span>
<span><span class="co">#&gt; ERROR: TYPE column not found. Consider using the add_missing_fields function to autofill TYPE. </span></span>
<span><span class="co">#&gt; $type_check.Info</span></span>
<span><span class="co">#&gt; [1] "ERROR: TYPE column not found."</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; --------------------</span></span>
<span><span class="co">#&gt; description_check: Failed </span></span>
<span><span class="co">#&gt; ERROR: missing and duplicate descriptions found in data dictionary. </span></span>
<span><span class="co">#&gt; $description_check.Info</span></span>
<span><span class="co">#&gt; # A tibble: 4 × 2</span></span>
<span><span class="co">#&gt;   VARNAME  VARDESC              </span></span>
<span><span class="co">#&gt;   &lt;chr&gt;    &lt;chr&gt;                </span></span>
<span><span class="co">#&gt; 1 PREGNANT &lt;NA&gt;                 </span></span>
<span><span class="co">#&gt; 2 REACT    &lt;NA&gt;                 </span></span>
<span><span class="co">#&gt; 3 HEIGHT   Height of participant</span></span>
<span><span class="co">#&gt; 4 WEIGHT   Height of participant</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; --------------------</span></span></code></pre></div>
<p>As described in more detail in the <code>dbGaPCheckup_vignette</code> vignette, some checks contain embedded “pre-checks” that must be passed before the check can be run. For example, as mentioned above, this package requires <code>MIN</code>, <code>MAX</code>, and <code>TYPE</code> fields in the data dictionary. We can see above that several of the checks (e.g., <code>NA_check</code>, <code>integer_check</code>, <code>decimal_check</code>) were not run because these additional required fields were missing. Never fear though! We have created a function to auto fill these fields that can be used to get further along in the checks!</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">DD.dict.updated</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/add_missing_fields.html">add_missing_fields</a></span><span class="op">(</span><span class="va">DD.dict</span>, <span class="va">DS.data</span><span class="op">)</span></span>
<span><span class="co">#&gt; $Message</span></span>
<span><span class="co">#&gt; [1] "CORRECTED ERROR: not all package-level required fields were present in the data dictionary. The missing fields have now been added! TYPE was inferred from the data, and MIN/MAX have been added as empty fields."</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $Missing</span></span>
<span><span class="co">#&gt; [1] "TYPE" "MIN"  "MAX"</span></span></code></pre></div>
<p>Once the fields are added, you can simply return to run your checks. Don’t forget to use the updated dictionary though!</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">report.v2</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/check_report.html">check_report</a></span><span class="op">(</span>DD.dict <span class="op">=</span> <span class="va">DD.dict.updated</span> , DS.data <span class="op">=</span> <span class="va">DS.data</span>, non.NA.missing.codes<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">4444</span>, <span class="op">-</span><span class="fl">9999</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 15 × 3</span></span>
<span><span class="co">#&gt;    Function            Status Message                                           </span></span>
<span><span class="co">#&gt;    &lt;chr&gt;               &lt;chr&gt;  &lt;chr&gt;                                             </span></span>
<span><span class="co">#&gt;  1 field_check         Passed Passed: required fields VARNAME, VARDESC, UNITS, …</span></span>
<span><span class="co">#&gt;  2 pkg_field_check     Passed Passed: package-level required fields TYPE, MIN, …</span></span>
<span><span class="co">#&gt;  3 dimension_check     Passed Passed: the variable count matches between the da…</span></span>
<span><span class="co">#&gt;  4 name_check          Passed Passed: the variable names match between the data…</span></span>
<span><span class="co">#&gt;  5 id_check            Passed Passed: All ID variable checks passed.            </span></span>
<span><span class="co">#&gt;  6 row_check           Passed Passed: no blank or duplicate rows detected.      </span></span>
<span><span class="co">#&gt;  7 NA_check            Passed Passed: no NA values detected in data set.        </span></span>
<span><span class="co">#&gt;  8 type_check          Passed Passed: All TYPE entries found are accepted by db…</span></span>
<span><span class="co">#&gt;  9 values_check        Passed Passed: all four VALUES checks look good.         </span></span>
<span><span class="co">#&gt; 10 integer_check       Passed Passed: all variables listed as TYPE integer appe…</span></span>
<span><span class="co">#&gt; 11 decimal_check       Passed Passed: all variables listed as TYPE decimal appe…</span></span>
<span><span class="co">#&gt; 12 misc_format_check   Passed Passed: no check-specific formatting issues ident…</span></span>
<span><span class="co">#&gt; 13 description_check   Failed ERROR: missing and duplicate descriptions found i…</span></span>
<span><span class="co">#&gt; 14 minmax_check        Passed Passed: when provided, all variables are within t…</span></span>
<span><span class="co">#&gt; 15 missing_value_check Failed ERROR: some variables have non-encoded missing va…</span></span>
<span><span class="co">#&gt; --------------------</span></span>
<span><span class="co">#&gt; description_check: Failed </span></span>
<span><span class="co">#&gt; ERROR: missing and duplicate descriptions found in data dictionary. </span></span>
<span><span class="co">#&gt; $description_check.Info</span></span>
<span><span class="co">#&gt; # A tibble: 4 × 2</span></span>
<span><span class="co">#&gt;   VARNAME  VARDESC              </span></span>
<span><span class="co">#&gt;   &lt;chr&gt;    &lt;chr&gt;                </span></span>
<span><span class="co">#&gt; 1 PREGNANT &lt;NA&gt;                 </span></span>
<span><span class="co">#&gt; 2 REACT    &lt;NA&gt;                 </span></span>
<span><span class="co">#&gt; 3 HEIGHT   Height of participant</span></span>
<span><span class="co">#&gt; 4 WEIGHT   Height of participant</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; --------------------</span></span>
<span><span class="co">#&gt; missing_value_check: Failed </span></span>
<span><span class="co">#&gt; ERROR: some variables have non-encoded missing value codes. </span></span>
<span><span class="co">#&gt; $missing_value_check.Info</span></span>
<span><span class="co">#&gt;     VARNAME VALUE MEANING  PASS</span></span>
<span><span class="co">#&gt; 16 CUFFSIZE -9999    &lt;NA&gt; FALSE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; --------------------</span></span></code></pre></div>
<p>Now we see that 13 out of 15 checks pass, but the workflow fails at <code>description_check</code> and <code>missing_value_check</code>. Specifically, in <code>description_check</code> we see that variables <code>PREGNANT</code> and <code>REACT</code> were identified as having missing variable descriptions (<code>VARDESC</code>), and variables <code>HEIGHT</code> and <code>WEIGHT</code> incorrectly have identical descriptions. In <code>missing_value_check</code>, we see that the variable <code>CUFFSIZE</code> contains a <code>-9999</code> encoded value that is not specified in a <code>VALUES</code> column. While we have included functions that support “simple fixes”, the issues identified here would need to be corrected manually in your data dictionary before moving on.</p>
<p>Note that our package also includes some helpful reporting functions (<code>create_report</code> and <code>create_awareness_report</code>) that can help you more fully interrogate your data and catch potential errors prior to dbGaP data submission.</p>
<p>Finally, after your data dictionary is fully consistent with your data, you can use the <code>label_data</code> function to convert your data to labelled data, essentially embedding the data dictionary into the data.</p>
<p>For more information about these reporting functions, and all of the checks available in our package, see the Quick Start (<code>dbGaPCheckup</code>) or expanded (<code>dbGaPCheckup_vignette</code>) vignettes for more information!</p>
</div>
<div class="section level1">
<h1 id="id_5-contact-information">5 Contact information<a class="anchor" aria-label="anchor" href="#id_5-contact-information"></a>
</h1>
<p>If you have any questions or comments, please feel free to contact us!</p>
<p>Lacey W. Heinsberg, PhD, RN: <a href="mailto:law145@pitt.edu" class="email">law145@pitt.edu</a><br>
Daniel E. Weeks, PhD: <a href="mailto:weeks@pitt.edu" class="email">weeks@pitt.edu</a></p>
<p>Bug reports: <a href="https://github.com/lwheinsberg/dbGaPCheckup/issues" class="external-link uri">https://github.com/lwheinsberg/dbGaPCheckup/issues</a></p>
</div>
<div class="section level1">
<h1 id="id_6-acknowledgments">6 Acknowledgments<a class="anchor" aria-label="anchor" href="#id_6-acknowledgments"></a>
</h1>
<p>This package was developed with partial support from the National Institutes of Health under award numbers R01HL093093, R01HL133040, and K99HD107030. The <code>eval_function</code> and <code>dat_function</code> functions that form the backbone of the awareness reports were inspired by an elegant 2016 homework answer submitted by Tanbin Rahman in our HUGEN 2070 course ‘Bioinformatics for Human Genetics’. We would also like to thank Nick Moshgat for testing and providing feedback on our package during development.</p>
</div>

  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=dbGaPCheckup" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/lwheinsberg/dbGaPCheckup/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/lwheinsberg/dbGaPCheckup/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://www.r-project.org/Licenses/GPL-2" class="external-link">GPL-2</a> </li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing dbGaPCheckup</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Lacey W. Heinsberg <br><small class="roles"> Author, maintainer </small>  </li>
<li>Daniel E. Weeks <br><small class="roles"> Author </small>  </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Lacey W. Heinsberg, Daniel E. Weeks.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
